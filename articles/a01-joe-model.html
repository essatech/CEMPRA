<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1. Joe Model Overview • CEMPRA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1. Joe Model Overview">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CEMPRA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01-joe-model.html">1. Joe Model Overview</a></li>
    <li><a class="dropdown-item" href="../articles/a02-joe-model-batch-run.html">2. Joe Model Batch Run</a></li>
    <li><a class="dropdown-item" href="../articles/a03-population-model.html">3. Population Model Overview</a></li>
    <li><a class="dropdown-item" href="../articles/a04-population-model-batch-run.html">4. Population Model Batch Run</a></li>
    <li><a class="dropdown-item" href="../articles/a05-bc-cef.html">5. BC CEF Data Import</a></li>
    <li><a class="dropdown-item" href="../articles/a06-population-model-sensitivity.html">6. Population Model Evaluation</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="a01-joe-model_files/kePrint-0.0.1/kePrint.js"></script><link href="a01-joe-model_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>1. Joe Model Overview</h1>
            
            <h4 data-toc-skip class="date">2024-12-12</h4>
      

      <div class="d-none name"><code>a01-joe-model.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The following tutorial provides an overview of running the Joe Model
from the CEMPRA R package. Users following this tutorial should have R,
RStudio and the R package <code>devtools</code> installed on their
machine.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>At this time the CEMPRA R package is hosted on GitHub and can be
installed using devtools. In the near future the CEMPRA package will be
available on R-CRAN for standard installation and loading.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="co"># Uncomment and run the following line to install the CEMPRA package</span></span>
<span><span class="co"># install_github("essatech/CEMPRA")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://essatech.github.io/CEMPRA/">CEMPRA</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="import-data">Import Data<a class="anchor" aria-label="anchor" href="#import-data"></a>
</h2>
<p>The Joe Model requires two key datasets, a stressor-response workbook
and a stressor magnitude workbook. We will import these datasets using
the <code>StressorResponseWorkbook</code> and
<code>StressorMagnitudeWorkbook</code> functions. Change
<code>filename_sr</code> and <code>filename_rm</code> to the location of
your stressor-response and stressor-magnitude workbooks on your own
computer. We are loading canned data from the CEMPRA package for this
tutorial.</p>
<div class="section level3">
<h3 id="stressor-response-workbook">Stressor Response Workbook<a class="anchor" aria-label="anchor" href="#stressor-response-workbook"></a>
</h3>
<p>The stressor-response Excel workbook must follow a standardized
format. The first worksheet should be titled <code>Main</code>.</p>
<div class="section level4">
<h4 id="main-worksheet">Main Worksheet<a class="anchor" aria-label="anchor" href="#main-worksheet"></a>
</h4>
<pre><code><span><span class="co">#&gt;      Stressors Stressor_cat Interaction Linked Stress_Scale   Function</span></span>
<span><span class="co">#&gt; 1     Aug_flow     Aug_flow     Minimum      A       linear continuous</span></span>
<span><span class="co">#&gt; 2 Barrier_dams Barrier_dams          NA     NA       linear       step</span></span>
<span><span class="co">#&gt; 3         BKTR         BKTR          NA     NA       linear continuous</span></span>
<span><span class="co">#&gt; 4     Feb_flow     Feb_flow     Minimum      A       linear continuous</span></span>
<span><span class="co">#&gt; 5    Foot_flow    Foot_flow          NA     NA       linear continuous</span></span>
<span><span class="co">#&gt;   Life_stages Parameters Units     Model</span></span>
<span><span class="co">#&gt; 1       adult       &lt;NA&gt;    NA Joe Model</span></span>
<span><span class="co">#&gt; 2       adult       &lt;NA&gt;    NA Joe Model</span></span>
<span><span class="co">#&gt; 3       adult       &lt;NA&gt;    NA Joe Model</span></span>
<span><span class="co">#&gt; 4       adult       &lt;NA&gt;    NA Joe Model</span></span>
<span><span class="co">#&gt; 5       adult       &lt;NA&gt;    NA Joe Model</span></span></code></pre>
<p>Take a look at the <code>Main</code> worksheet.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Stressors</strong> Name of the stressor…</li>
<li>
<strong>Stressor_cat</strong> Name of the stressor category (only
relevant to population model)…</li>
<li>
<strong>Interaction</strong> Can be either blank or NA with the
default of multiplicative, ‘Additive’ or ‘Minimum’…</li>
<li>
<strong>Linked</strong> For variables with minimum interaction…</li>
<li>
<strong>Stress_Scale</strong> Can be either <code>'linear'</code> or
<code>'logarithmic'</code>…</li>
<li>
<strong>Function</strong> Can be either <code>'continuious'</code>
or <code>'step'</code>…</li>
<li>
<strong>Life_stages</strong> Can be either <code>'fry_parr'</code>,
<code>'alevin'</code>, <code>'sub_adult'</code> or
<code>'adult'</code>,…</li>
<li>
<strong>Parameters</strong> Can be blank or NA (default), which
implys the relationship is for system capacity or linked to a vital rate
<code>'survival'</code>, <code>'capacity'</code>…</li>
</ol>
</div>
<div class="section level4">
<h4 id="stressor-response-worksheets">Stressor-Response Worksheets<a class="anchor" aria-label="anchor" href="#stressor-response-worksheets"></a>
</h4>
<p>After the stressor response Excel workbook then must have individual
worksheets for each of the stressors after the <code>Main</code> sheet.
Please ensure that the spelling is identical between the
<code>Stressors</code> column in the <code>Main</code> sheet and the
work sheet name for each stressor.</p>
<p>Each stressor-response curve is provided on a separate worksheet. The
example below shows the stressor-response curve of water temperature (C)
and the Adult system capacity.</p>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 2: Example ‘Temperature’ dose-response curve data for temperature
(x-axis) and system capacity (y-axis)
</caption>
<thead><tr>
<th style="text-align:right;">
Temperature
</th>
<th style="text-align:right;">
Mean System Capacity (%)
</th>
<th style="text-align:right;">
SD
</th>
<th style="text-align:right;">
low.limit
</th>
<th style="text-align:right;">
up.limit
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
80
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
95
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>
<strong>Temperature</strong> The first column should be the name of
the stressor…</li>
<li>
<strong>Mean System Capacity (%)</strong> The next column is the
mean system capacity (from 0 - 100)..</li>
<li>
<strong>SD</strong> The third column is the standard deviation for
the mean system capacity. This is useful to represent uncertainty in the
relationship. For example, a temperature of 12C will not always equate
to a system capacity of exactly 90%…</li>
<li>
<strong>low.limit</strong> Lower limits for the cumulative system
capacity…</li>
<li>
<strong>up.limit</strong> Upper limits for the cumulative system
capacity…</li>
</ol>
<div class="figure" style="text-align: center">
<img src="a01-joe-model_files/figure-html/dr_sample-1.png" alt="Example Stressor-Response Curve" width="576"><p class="caption">
Example Stressor-Response Curve
</p>
</div>
<p>The figure above shows a stressor response curve. The raw values of
the stressor are plotted on the x-axis and the mean system capacity is
shown on the y-axis. For each stressor and each simulation values for
the mean system capacity will be drawn from a normal distribution with a
mean and standard deviation (error bars) bound by the lower and upper
limits (grey shading).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Load default file from Joe Model Package</span></span>
<span>  <span class="va">filename_sr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_response_fixed_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"CEMPRA"</span><span class="op">)</span></span>
<span>  <span class="co"># Use the StressorResponseWorkbook() function from the CEMPRA package to format the data and check for errors and issues</span></span>
<span>  <span class="va">sr_wb_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorResponseWorkbook.html">StressorResponseWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_sr</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "main_sheet"     "stressor_names" "pretty_names"   "sr_dat"</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="stressor-magnitude-workbook">Stressor Magnitude Workbook<a class="anchor" aria-label="anchor" href="#stressor-magnitude-workbook"></a>
</h3>
<p>Review the stressor magnitude levels for a given location.</p>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 3: Location data from stressor-magnitude.xlsx workbook
</caption>
<thead><tr>
<th style="text-align:right;">
HUC_ID
</th>
<th style="text-align:left;">
NAME
</th>
<th style="text-align:left;">
Stressor
</th>
<th style="text-align:left;">
Stressor_cat
</th>
<th style="text-align:right;">
Mean
</th>
<th style="text-align:right;">
SD
</th>
<th style="text-align:left;">
Distribution
</th>
<th style="text-align:right;">
Low_Limit
</th>
<th style="text-align:right;">
Up_Limit
</th>
<th style="text-align:left;">
Comments
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
Aug_flow
</td>
<td style="text-align:left;">
Aug_flow
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
Barrier_dams
</td>
<td style="text-align:left;">
Barrier_dams
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
BKTR
</td>
<td style="text-align:left;">
BKTR
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
Feb_flow
</td>
<td style="text-align:left;">
Feb_flow
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>Column names should be as follows:</p>
<ol style="list-style-type: decimal">
<li>
<strong>HUC_ID</strong> Unique (numeric) identifier for a location
of interest. Formally from Hydrologial Unit Code (HUC) representing
unique sub basins, but can be anything…</li>
<li>
<strong>NAME</strong> Name (character) of a given location. Note
that this column is used for display purposes only…</li>
<li>
<strong>Stressor</strong> Name of the stressor. Note that this must
match the spelling used in the stressor response workbook…</li>
<li>
<strong>Stressor_cat</strong> Name of the stressor category. Note
that this mutch match the spelling used in the stressor response
workbook…</li>
<li>
<strong>Mean</strong> Mean value for the specific location…</li>
<li>
<strong>SD</strong> Standard deviation for the specific stressor for
that location. The value of each stressor and combination will be
resampled for each simulation…</li>
<li>
<strong>Distribution</strong> Re-sampling distribution either
<code>'lognormal'</code> or <code>'normal'</code>…</li>
<li>
<strong>Low_Limit</strong> Lower limits for the location-specific
stressor…</li>
<li>
<strong>Up_Limit</strong> Upper limits for the location-specific
stressor….</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Load default file from Joe Model Package</span></span>
<span>  <span class="va">filename_rm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_magnitude_unc_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"CEMPRA"</span><span class="op">)</span></span>
<span>  <span class="co"># Use the StressorMagnitudeWorkbook() function from the CEMPRA package to format the data and check for errors and issues</span></span>
<span>  <span class="va">smw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorMagnitudeWorkbook.html">StressorMagnitudeWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_rm</span>, scenario_worksheet <span class="op">=</span> <span class="st">"natural_unc"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">smw</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "HUC_ID"       "NAME"         "Stressor"     "Stressor_cat" "Mean"        </span></span>
<span><span class="co">#&gt;  [6] "SD"           "Distribution" "Low_Limit"    "Up_Limit"     "Comments"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="cumulative-system-capacity">Cumulative System Capacity<a class="anchor" aria-label="anchor" href="#cumulative-system-capacity"></a>
</h2>
<p>Run the cumulative system capacity for a single watershed</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Stressor Response Workbook object = sr_wb_dat</span></span>
<span></span>
<span><span class="co"># Run the mean_Response() function to create response curves.</span></span>
<span><span class="co"># Note that this intermediate object is need throughout</span></span>
<span><span class="va">mean.resp.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mean_Response.html">mean_Response</a></span><span class="op">(</span></span>
<span>  n.stressors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">)</span>,</span>
<span>  str.list <span class="op">=</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">sr_dat</span>,</span>
<span>  main <span class="op">=</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set up objects for system capacity function - for "Temperature_adult"</span></span>
<span><span class="va">f.main.df</span> <span class="op">&lt;-</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">$</span><span class="va">Stressors</span> <span class="op">==</span> <span class="st">"Temperature_adult"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">f.stressor.df</span> <span class="op">&lt;-</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">sr_dat</span><span class="op">[[</span><span class="st">"Temperature_adult"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">f.mean.resp.list</span> <span class="op">&lt;-</span> <span class="va">mean.resp.list</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">$</span><span class="va">Stressors</span> <span class="op">==</span> <span class="st">"Temperature_adult"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Stressor Magnitude: Make up fake data for a sample watershed (e.g., HUC_ID: 1701010208)</span></span>
<span><span class="va">smw_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>HUC_ID <span class="op">=</span> <span class="fl">0</span>, NAME <span class="op">=</span> <span class="st">"Location Name"</span>,</span>
<span>                      Stressor <span class="op">=</span> <span class="st">"Temperature_adult"</span>, Stressor_cat <span class="op">=</span> <span class="st">"Temperature"</span>,</span>
<span>                      Mean <span class="op">=</span> <span class="fl">14</span>, SD <span class="op">=</span> <span class="fl">3</span>, Distribution <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>                      Low_Limit <span class="op">=</span> <span class="fl">4</span>, Up_Limit <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ?SystemCapacity # Preview help function</span></span>
<span></span>
<span><span class="va">test_sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SystemCapacity.html">SystemCapacity</a></span><span class="op">(</span>f.dose.df <span class="op">=</span> <span class="va">smw_sample</span>,</span>
<span>                          f.main.df <span class="op">=</span> <span class="va">f.main.df</span>,</span>
<span>                          f.stressor.df <span class="op">=</span> <span class="va">f.stressor.df</span>,</span>
<span>                          f.mean.resp.list <span class="op">=</span> <span class="va">f.mean.resp.list</span>,</span>
<span>                          n.sims <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">test_sc</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "sys.cap"  "dose"     "dose.mat"</span></span>
<span></span>
<span><span class="co"># Look at system capacity for one variable and one stressor</span></span>
<span><span class="va">sys_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">test_sc</span><span class="op">$</span><span class="va">sys.cap</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sys_cap</span>, xlab <span class="op">=</span> <span class="st">"Mean System Capacity (%)"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="a01-joe-model_files/figure-html/tmsc_plot-1.png" alt="Mean System Capacity for temperature for a hypothetical watershed" width="576"><p class="caption">
Mean System Capacity for temperature for a hypothetical watershed
</p>
</div>
</div>
<div class="section level2">
<h2 id="joe-model">Joe Model<a class="anchor" aria-label="anchor" href="#joe-model"></a>
</h2>
<p>What about all variables and all stressors - run the full Joe
Model…</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import of stressor response and magnitude workbook</span></span>
<span><span class="va">filename_rm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_magnitude_unc_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"CEMPRA"</span><span class="op">)</span></span>
<span><span class="va">filename_sr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_response_fixed_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"CEMPRA"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dose</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorMagnitudeWorkbook.html">StressorMagnitudeWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_rm</span>, scenario_worksheet <span class="op">=</span> <span class="st">"natural_unc"</span><span class="op">)</span></span>
<span><span class="va">sr_wb_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorResponseWorkbook.html">StressorResponseWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_sr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ----------------------------------------------------------</span></span>
<span><span class="co"># Run the Basic Joe Model</span></span>
<span><span class="va">jmr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/JoeModel_Run.html">JoeModel_Run</a></span><span class="op">(</span>dose <span class="op">=</span> <span class="va">dose</span>, <span class="co"># Stressor Magnitude Object</span></span>
<span>                    sr_wb_dat <span class="op">=</span> <span class="va">sr_wb_dat</span>, <span class="co"># Stressor Response Object</span></span>
<span>                    MC_sims <span class="op">=</span> <span class="fl">10</span> <span class="co"># Number of Monte Carlo simulations</span></span>
<span>                    <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">jmr</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ce.df"      "sc.dose.df"</span></span>
<span><span class="co"># ce.df = Mean system capacity for each HUC_ID for each simulation</span></span>
<span><span class="co"># sc.dose.df = Mean system capacity for each variable for each HUC_ID for each simulation</span></span>
<span><span class="va">msc</span> <span class="op">&lt;-</span> <span class="va">jmr</span><span class="op">$</span><span class="va">ce.df</span><span class="op">$</span><span class="va">CE</span> <span class="op">*</span> <span class="fl">100</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">msc</span>, xlab <span class="op">=</span> <span class="st">"Mean System Capacity (%)"</span>, main <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="a01-joe-model_files/figure-html/msc_plot-1.png" alt="Mean System Capacity for all stressors and all watersheds across all simulations" width="576"><p class="caption">
Mean System Capacity for all stressors and all watersheds across all
simulations
</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Bayly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
