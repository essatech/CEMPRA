[{"path":"https://essatech.github.io/CEMPRA/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 ESSA Technologies Ltd. Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"1. Joe Model Overview","text":"tutorial provides introduction Joe Model, core component CEMPRA (Cumulative Effects Model Prioritizing Recovery Actions) framework. end tutorial, understand : Import stressor-response stressor-magnitude data Calculate system capacity individual stressors Run full Joe Model assess cumulative effects across multiple stressors","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"what-is-the-joe-model","dir":"Articles","previous_headings":"Overview","what":"What is the Joe Model?","title":"1. Joe Model Overview","text":"Joe Model cumulative effects assessment tool quantifies multiple environmental stressors combine affect capacity system support target species ecosystem function. model works : Defining stressor-response relationships: environmental stressor (e.g., temperature, sediment, flow alteration) affect system capacity? Measuring stressor magnitudes: current levels stressor locations interest? Combining effects: multiple stressors interact produce cumulative effect system? output system capacity score (0-100%) representing relative ability location support target species, given current stressor conditions.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"prerequisites","dir":"Articles","previous_headings":"Overview","what":"Prerequisites","title":"1. Joe Model Overview","text":"Users following tutorial : R RStudio installed devtools package installed Basic familiarity R data structures (data frames, lists)","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"1. Joe Model Overview","text":"CEMPRA R package hosted GitHub can installed using devtools.","code":"library(devtools) # Uncomment and run the following line to install the CEMPRA package # install_github(\"essatech/CEMPRA\") library(CEMPRA)"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"understanding-the-input-data","dir":"Articles","previous_headings":"","what":"Understanding the Input Data","title":"1. Joe Model Overview","text":"Joe Model requires two Excel workbooks input: two workbooks work together: stressor-response workbook tells us bad given stressor level , stressor-magnitude workbook tells us stressor levels actually location.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"stressor-response-workbook","dir":"Articles","previous_headings":"","what":"Stressor-Response Workbook","title":"1. Joe Model Overview","text":"stressor-response workbook defines relationship environmental conditions system capacity. Think answering question: “temperature 18°C, percentage optimal habitat capacity remains?”","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"workbook-structure","dir":"Articles","previous_headings":"Stressor-Response Workbook","what":"Workbook Structure","title":"1. Joe Model Overview","text":"stressor-response Excel workbook must follow standardized format : Main worksheet listing stressors properties Individual worksheets stressor containing dose-response curve data","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"the-main-worksheet","dir":"Articles","previous_headings":"Stressor-Response Workbook","what":"The Main Worksheet","title":"1. Joe Model Overview","text":"Main worksheet serves master index stressors analysis. ’s example looks like: row represents one stressor, following columns:","code":"#>      Stressors Stressor_cat Interaction Linked Stress_Scale   Function #> 1     Aug_flow     Aug_flow     Minimum      A       linear continuous #> 2 Barrier_dams Barrier_dams          NA     NA       linear       step #> 3         BKTR         BKTR          NA     NA       linear continuous #> 4     Feb_flow     Feb_flow     Minimum      A       linear continuous #> 5    Foot_flow    Foot_flow          NA     NA       linear continuous #>   Life_stages Parameters Units     Model #> 1       adult       <NA>    NA Joe Model #> 2       adult       <NA>    NA Joe Model #> 3       adult       <NA>    NA Joe Model #> 4       adult       <NA>    NA Joe Model #> 5       adult       <NA>    NA Joe Model"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"stressor-response-curve-worksheets","dir":"Articles","previous_headings":"Stressor-Response Workbook","what":"Stressor-Response Curve Worksheets","title":"1. Joe Model Overview","text":"Main worksheet, stressor must worksheet containing dose-response data. worksheet name must exactly match stressor name Main sheet. dose-response curve defines system capacity changes across range stressor values: Example dose-response curve temperature adult system capacity columns :","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"visualizing-the-dose-response-curve","dir":"Articles","previous_headings":"Stressor-Response Workbook > Stressor-Response Curve Worksheets","what":"Visualizing the Dose-Response Curve","title":"1. Joe Model Overview","text":"figure illustrates interpret stressor-response curve. optimal temperature species around 16°C (100% capacity). temperature increases beyond optimum, capacity declines rapidly, reaching 0% temperatures 24°C. Example stressor-response curve showing temperature affects system capacity. Error bars show standard deviation; grey shading shows allowable range. Key points uncertainty: error bars (standard deviation) represent natural variability uncertainty relationship grey shading shows absolute bounds - system capacity values never fall outside range Monte Carlo simulations, values sampled distribution propagate uncertainty analysis","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"loading-the-stressor-response-workbook","dir":"Articles","previous_headings":"Stressor-Response Workbook","what":"Loading the Stressor-Response Workbook","title":"1. Joe Model Overview","text":"Use StressorResponseWorkbook() function import validate data: returned object contains: main_sheet: Main worksheet data data frame sr_dat: list data frames, one stressor’s dose-response curve","code":"# Load the example stressor-response workbook included with CEMPRA filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\")  # Import and validate the workbook sr_wb_dat <- StressorResponseWorkbook(filename = filename_sr)  # The function returns a list with two components: names(sr_wb_dat) #> [1] \"main_sheet\"     \"stressor_names\" \"pretty_names\"   \"sr_dat\""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"stressor-magnitude-workbook","dir":"Articles","previous_headings":"","what":"Stressor-Magnitude Workbook","title":"1. Joe Model Overview","text":"stressor-response workbook defines stressors affect system, stressor-magnitude workbook tells us actual stressor levels location. workbook contains location-specific measurements estimates stressor, along uncertainty bounds.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"workbook-structure-1","dir":"Articles","previous_headings":"Stressor-Magnitude Workbook","what":"Workbook Structure","title":"1. Joe Model Overview","text":"Example stressor-magnitude data showing stressor levels one location row represents one stressor one location:","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"loading-the-stressor-magnitude-workbook","dir":"Articles","previous_headings":"Stressor-Magnitude Workbook","what":"Loading the Stressor-Magnitude Workbook","title":"1. Joe Model Overview","text":"Use StressorMagnitudeWorkbook() function import location data: Tip: stressor-magnitude workbook can contain multiple scenario worksheets (e.g., “current”, “restored”, “future_climate”). allows compare system capacity different management scenarios without creating multiple files.","code":"# Load the example stressor-magnitude workbook filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\")  # Import the workbook - note that you specify which scenario worksheet to use smw <- StressorMagnitudeWorkbook(filename = filename_rm, scenario_worksheet = \"natural_unc\")  # Preview the column names names(smw) #>  [1] \"HUC_ID\"       \"NAME\"         \"Stressor\"     \"Stressor_cat\" \"Mean\"         #>  [6] \"SD\"           \"Distribution\" \"Low_Limit\"    \"Up_Limit\"     \"Comments\""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"calculating-system-capacity","dir":"Articles","previous_headings":"","what":"Calculating System Capacity","title":"1. Joe Model Overview","text":"Now understand input data, let’s calculate system capacity. ’ll start single stressor understand mechanics, run full model stressors.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"step-1-generate-mean-response-curves","dir":"Articles","previous_headings":"Calculating System Capacity","what":"Step 1: Generate Mean Response Curves","title":"1. Joe Model Overview","text":"calculating system capacity, need process stressor-response data interpolated curves. mean_Response() function creates smooth curves discrete data points worksheets: creates list response functions can convert stressor value system capacity score.","code":"# Create interpolated response curves for all stressors mean.resp.list <- mean_Response(   n.stressors = nrow(sr_wb_dat$main_sheet),   str.list = sr_wb_dat$sr_dat,   main = sr_wb_dat$main_sheet )"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"step-2-calculate-capacity-for-a-single-stressor","dir":"Articles","previous_headings":"Calculating System Capacity","what":"Step 2: Calculate Capacity for a Single Stressor","title":"1. Joe Model Overview","text":"Let’s calculate system capacity temperature hypothetical location. helps illustrate model run full analysis.","code":"# Extract data for the \"Temperature_adult\" stressor f.main.df <- sr_wb_dat$main_sheet[which(sr_wb_dat$main_sheet$Stressors == \"Temperature_adult\"), ] f.stressor.df <- sr_wb_dat$sr_dat[[\"Temperature_adult\"]] f.mean.resp.list <- mean.resp.list[[which(sr_wb_dat$main_sheet$Stressors == \"Temperature_adult\")]]  # Create sample data for a hypothetical location # Mean temperature = 14°C, SD = 3°C smw_sample <- data.frame(   HUC_ID = 0,   NAME = \"Example Location\",   Stressor = \"Temperature_adult\",   Stressor_cat = \"Temperature\",   Mean = 14,   SD = 3,   Distribution = \"normal\",   Low_Limit = 4,   Up_Limit = 20 )  # Calculate system capacity with 100 Monte Carlo simulations test_sc <- SystemCapacity(   f.dose.df = smw_sample,   f.main.df = f.main.df,   f.stressor.df = f.stressor.df,   f.mean.resp.list = f.mean.resp.list,   n.sims = 100 )  # Convert to percentage sys_cap <- round(test_sc$sys.cap * 100, 3)"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"understanding-the-monte-carlo-results","dir":"Articles","previous_headings":"Calculating System Capacity","what":"Understanding the Monte Carlo Results","title":"1. Joe Model Overview","text":"model runs multiple simulations (100 case) capture uncertainty. simulation: temperature value randomly drawn specified distribution (mean=14°C, SD=3°C) temperature converted system capacity using dose-response curve Additional uncertainty dose-response relationship incorporated result distribution possible system capacity values: Distribution system capacity values temperature example location. spread reflects uncertainty temperature measurement dose-response relationship. mean temperature 14°C, system capacity relatively high (around 80%), matches dose-response curve 14°C corresponds good habitat conditions.","code":"hist(sys_cap,      xlab = \"System Capacity (%)\",      main = \"System Capacity Distribution - Temperature Only\",      col = \"steelblue\",      border = \"white\") abline(v = mean(sys_cap), col = \"red\", lwd = 2, lty = 2) legend(\"topright\", legend = paste(\"Mean =\", round(mean(sys_cap), 1), \"%\"),        col = \"red\", lty = 2, lwd = 2, bty = \"n\")"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"running-the-full-joe-model","dir":"Articles","previous_headings":"","what":"Running the Full Joe Model","title":"1. Joe Model Overview","text":"Now let’s run complete Joe Model, : Calculates system capacity every stressor every location Combines individual stressor effects cumulative system capacity score Repeats process across multiple Monte Carlo simulations quantify uncertainty","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"loading-the-data","dir":"Articles","previous_headings":"Running the Full Joe Model","what":"Loading the Data","title":"1. Joe Model Overview","text":"","code":"# Load both workbooks filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\") filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\")  dose <- StressorMagnitudeWorkbook(filename = filename_rm, scenario_worksheet = \"natural_unc\") sr_wb_dat <- StressorResponseWorkbook(filename = filename_sr)  # Check how many locations and stressors we have cat(\"Number of locations:\", length(unique(dose$HUC_ID)), \"\\n\") #> Number of locations: 103 cat(\"Number of stressors:\", nrow(sr_wb_dat$main_sheet), \"\\n\") #> Number of stressors: 18"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"running-the-model","dir":"Articles","previous_headings":"Running the Full Joe Model","what":"Running the Model","title":"1. Joe Model Overview","text":"JoeModel_Run() function handles calculations:","code":"# Run the Joe Model jmr <- JoeModel_Run(   dose = dose,           # Stressor magnitude data   sr_wb_dat = sr_wb_dat, # Stressor-response relationships   MC_sims = 10           # Number of Monte Carlo simulations (use more for final analysis) )  # Examine the output structure names(jmr) #> [1] \"ce.df\"      \"sc.dose.df\""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"understanding-the-output","dir":"Articles","previous_headings":"Running the Full Joe Model","what":"Understanding the Output","title":"1. Joe Model Overview","text":"Joe Model returns list two key components: Let’s visualize cumulative system capacity across locations simulations: Distribution cumulative system capacity across locations Monte Carlo simulations. Lower values indicate locations multiple stressors limiting habitat quality.","code":"# Extract cumulative system capacity (as percentage) msc <- jmr$ce.df$CE * 100  hist(msc,      xlab = \"Cumulative System Capacity (%)\",      main = \"Joe Model Results - All Locations\",      col = \"steelblue\",      border = \"white\",      breaks = 20) abline(v = mean(msc), col = \"red\", lwd = 2, lty = 2) legend(\"topleft\",        legend = c(paste(\"Mean =\", round(mean(msc), 1), \"%\"),                   paste(\"Min =\", round(min(msc), 1), \"%\"),                   paste(\"Max =\", round(max(msc), 1), \"%\")),        bty = \"n\")"},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"interpreting-the-results","dir":"Articles","previous_headings":"Running the Full Joe Model","what":"Interpreting the Results","title":"1. Joe Model Overview","text":"histogram shows distribution cumulative system capacity values. Key insights: High values (>70%): Locations good habitat conditions stressors limiting Medium values (40-70%): Locations stressors degrading habitat quality Low values (<40%): Heavily impacted locations multiple stressors limiting capacity spread values reflects : Spatial variation: Different locations different stressor levels Uncertainty: Monte Carlo sampling propagates uncertainty stressor measurements dose-response relationships","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a01-joe-model.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"1. Joe Model Overview","text":"tutorial covered basics running Joe Model single scenario. learn : Running multiple scenarios: See Tutorial 2: Joe Model Batch Run Linking population dynamics: See Tutorial 3: Population Model Overview Sensitivity analysis: See Tutorial 6: Population Model Evaluation detailed guidance preparing data, see CEMPRA Documentation.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"2. Joe Model Batch Run","text":"tutorial demonstrates run Joe Model batch mode evaluate multiple management climate scenarios simultaneously. Building Tutorial 1: Joe Model Overview, learn : - Create structure scenarios file - Run Joe Model across multiple scenarios single function call - Visualize compare results across scenarios locations","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"prerequisites","dir":"Articles","previous_headings":"Overview","what":"Prerequisites","title":"2. Joe Model Batch Run","text":"starting tutorial, : - Complete Tutorial 1: Joe Model Overview - Understand stressor-response stressor-magnitude workbooks structured - basic familiarity ggplot2 visualization","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"why-use-batch-runs","dir":"Articles","previous_headings":"Overview","what":"Why Use Batch Runs?","title":"2. Joe Model Batch Run","text":"real-world applications, often need compare multiple scenarios inform management decisions. Common use cases include: Rather running Joe Model separately scenario manually combining results, batch function automates process returns consolidated dataset ready analysis.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"how-batch-runs-work","dir":"Articles","previous_headings":"Overview","what":"How Batch Runs Work","title":"2. Joe Model Batch Run","text":"batch run function works modifying stressor magnitudes according multipliers specify scenarios file: Base condition: original stressor-magnitude values serve baseline Scenario multipliers: scenario specifies stressors modify much Automatic iteration: function loops scenarios, adjusting stressor values running Joe Model Consolidated output: Results scenarios combined single data frame example, multiplier 1.2 increases stressor 20%, 0.8 decreases 20%.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"setup-and-installation","dir":"Articles","previous_headings":"","what":"Setup and Installation","title":"2. Joe Model Batch Run","text":"","code":"# Install CEMPRA from GitHub (if not already installed) # library(devtools) # install_github(\"essatech/CEMPRA\")  # Load required packages library(CEMPRA) library(ggplot2) library(dplyr)"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"understanding-the-scenarios-file","dir":"Articles","previous_headings":"","what":"Understanding the Scenarios File","title":"2. Joe Model Batch Run","text":"scenarios file simple Excel workbook (data frame) defines changes apply scenario. ’s example structure:","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"scenarios-file-structure","dir":"Articles","previous_headings":"Understanding the Scenarios File","what":"Scenarios File Structure","title":"2. Joe Model Batch Run","text":"scenarios file specific format: Key points: - row represents one scenario - Stressor column names must exactly match names stressor-magnitude workbook - Values multipliers: 1.0 = change, 1.2 = +20%, 0.5 = -50% - Leave cells blank use 1.0 stressors shouldn’t change scenario - need include columns stressors want modify","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"example-scenarios","dir":"Articles","previous_headings":"Understanding the Scenarios File","what":"Example Scenarios","title":"2. Joe Model Batch Run","text":"example scenario configurations:","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"import-data","dir":"Articles","previous_headings":"","what":"Import Data","title":"2. Joe Model Batch Run","text":"batch run requires three input files: Stressor-magnitude workbook: Baseline stressor values location Stressor-response workbook: Dose-response relationships stressor Scenarios file: Multipliers defining scenario (see ) Let’s examine scenarios file understand scenarios ’re comparing:","code":"# --------------------------------------------------------- # 1. Import stressor-magnitude workbook #    This contains the baseline stressor values at each location # --------------------------------------------------------- filename_sm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\") stressor_magnitude <- StressorMagnitudeWorkbook(   filename = filename_sm,   scenario_worksheet = \"natural_unc\" )  # --------------------------------------------------------- # 2. Import stressor-response workbook #    This defines how each stressor affects system capacity # --------------------------------------------------------- filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\") stressor_response <- StressorResponseWorkbook(filename = filename_sr)  # --------------------------------------------------------- # 3. Import the scenarios file #    This defines the multipliers for each scenario # --------------------------------------------------------- filename_sc <- system.file(\"extdata\", \"scenario_batch_joe.xlsx\", package = \"CEMPRA\") scenarios <- readxl::read_excel(filename_sc) # View the scenarios configuration print(scenarios) #> # A tibble: 8 × 4 #>   Scenario   Stressor          Metric Multiplier #>   <chr>      <chr>             <chr>       <dbl> #> 1 scenario_1 Temperature_adult Mean          1.2 #> 2 scenario_1 Temperature_adult SD            1.1 #> 3 scenario_2 Aug_flow          Mean          0.7 #> 4 scenario_2 Aug_flow          SD            1.1 #> 5 scenario_3 Nat_lim_other     Mean          0.5 #> 6 scenario_4 Temperature_adult Mean          0.8 #> 7 scenario_4 Nat_lim_other     Mean          0.8 #> 8 scenario_4 Aug_flow          Mean          0.8"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"run-the-joe-model-in-batch-mode","dir":"Articles","previous_headings":"","what":"Run the Joe Model in Batch Mode","title":"2. Joe Model Batch Run","text":"Now run Joe Model across scenarios. JoeModel_Run_Batch() function: Reads baseline stressor magnitudes scenario, applies specified multipliers adjust stressor values Runs Joe Model Monte Carlo simulation Combines results single data frame","code":"# Run the Joe Model in batch mode across all scenarios # Note: MC_sims is set low (3) for this tutorial - use higher values (100+) # for real applications to get stable uncertainty estimates exp_dat <- JoeModel_Run_Batch(   scenarios = scenarios,           # Scenario definitions with multipliers   dose = stressor_magnitude,       # Baseline stressor magnitudes   sr_wb_dat = stressor_response,   # Stressor-response relationships   MC_sims = 3                      # Number of Monte Carlo simulations per scenario )"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"understanding-the-output","dir":"Articles","previous_headings":"Run the Joe Model in Batch Mode","what":"Understanding the Output","title":"2. Joe Model Batch Run","text":"output exp_dat data frame one row per location × scenario × Monte Carlo replicate:","code":"# View the first few rows of results head(exp_dat, 6) #> # A tibble: 6 × 4 #> # Groups:   HUC, simulation [6] #>          HUC simulation    CE Scenario   #>        <int>      <int> <dbl> <chr>      #> 1 1701010201          1 0     scenario_1 #> 2 1701010201          2 0     scenario_1 #> 3 1701010201          3 0     scenario_1 #> 4 1701010202          1 0.582 scenario_1 #> 5 1701010202          2 0.584 scenario_1 #> 6 1701010202          3 0.436 scenario_1  # Check the dimensions cat(\"\\nTotal rows:\", nrow(exp_dat), \"\\n\") #>  #> Total rows: 1236 cat(\"Unique scenarios:\", length(unique(exp_dat$Scenario)), \"\\n\") #> Unique scenarios: 4 cat(\"Unique locations (HUCs):\", length(unique(exp_dat$HUC)), \"\\n\") #> Unique locations (HUCs): 103"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"visualizing-results","dir":"Articles","previous_headings":"","what":"Visualizing Results","title":"2. Joe Model Batch Run","text":"batch results, two natural ways visualize data: location: Compare scenarios single watershed scenario: Compare watersheds within single scenario","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"interpreting-system-capacity-scores","dir":"Articles","previous_headings":"Visualizing Results","what":"Interpreting System Capacity Scores","title":"2. Joe Model Batch Run","text":"plotting, ’s helpful understand interpret system capacity values: thresholds general guidelines; appropriate thresholds may vary species system.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"plot-1-compare-scenarios-for-a-single-location","dir":"Articles","previous_headings":"Visualizing Results","what":"Plot 1: Compare Scenarios for a Single Location","title":"2. Joe Model Batch Run","text":"visualization answers: “different scenarios affect system capacity specific watershed?” useful : - Presenting results local stakeholders - Evaluating recovery actions benefit priority watershed - Comparing climate impact projections specific location System capacity across scenarios single watershed. Error bars show standard deviation Monte Carlo simulations. Reading plot: - point shows mean system capacity scenario - Error bars indicate uncertainty (±1 standard deviation Monte Carlo simulation) - Background colors indicate capacity zones (green = good, pink = critical) - Scenarios can compared horizontal position overlap","code":"# --------------------------------------------------------- # Select a single watershed to visualize # Replace this HUC with one relevant to your study area # --------------------------------------------------------- target_huc <- 1701010204 huc_subset <- exp_dat[exp_dat$HUC == target_huc, ]  # --------------------------------------------------------- # Calculate summary statistics across Monte Carlo replicates # Mean gives the central estimate; SD shows uncertainty # --------------------------------------------------------- huc_summary <- huc_subset %>%   group_by(Scenario) %>%   summarise(     mean = mean(CE, na.rm = TRUE),     sd = sd(CE, na.rm = TRUE),     .groups = \"drop\"   ) %>%   mutate(     lower = mean - sd,     upper = mean + sd   )  # --------------------------------------------------------- # Create the plot with color-coded capacity zones # --------------------------------------------------------- ggplot(huc_summary, aes(x = mean, y = Scenario, xmin = lower, xmax = upper)) +   # Add background zones for capacity interpretation   geom_rect(aes(xmin = 0, xmax = 0.2, ymin = -Inf, ymax = Inf),             fill = \"pink\", alpha = 0.02) +   geom_rect(aes(xmin = 0.2, xmax = 0.5, ymin = -Inf, ymax = Inf),             fill = \"orange\", alpha = 0.02) +   geom_rect(aes(xmin = 0.5, xmax = 0.75, ymin = -Inf, ymax = Inf),             fill = \"yellow\", alpha = 0.02) +   geom_rect(aes(xmin = 0.75, xmax = 1, ymin = -Inf, ymax = Inf),             fill = \"green\", alpha = 0.02) +   # Add points and error bars   geom_point(size = 3) +   geom_errorbarh(height = 0.2) +   # Labels and styling   ggtitle(paste(\"Watershed:\", target_huc)) +   xlab(\"System Capacity (0 - 1)\") +   ylab(\"Scenario\") +   scale_x_continuous(limits = c(0, 1)) +   theme_bw() +   theme(     plot.title = element_text(hjust = 0.5),     panel.grid.minor = element_blank()   )"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"plot-2-compare-locations-within-a-single-scenario","dir":"Articles","previous_headings":"Visualizing Results","what":"Plot 2: Compare Locations Within a Single Scenario","title":"2. Joe Model Batch Run","text":"visualization answers: “watersheds /least affected given scenario?” useful : - Prioritizing locations management action - Identifying spatial patterns vulnerability - Reporting landscape-wide results specific scenario System capacity across watersheds single scenario. view helps identify locations vulnerable. Reading plot: - Watersheds sorted highest lowest capacity (top bottom) - Watersheds pink/orange zones may priorities restoration - Wide error bars indicate high uncertainty, possibly due variable stressor data","code":"# --------------------------------------------------------- # Select a single scenario to visualize # --------------------------------------------------------- target_scenario <- \"scenario_1\" scenario_subset <- exp_dat[exp_dat$Scenario == target_scenario, ]  # --------------------------------------------------------- # Calculate summary statistics for each watershed # --------------------------------------------------------- scenario_summary <- scenario_subset %>%   group_by(HUC) %>%   summarise(     mean = mean(CE, na.rm = TRUE),     sd = sd(CE, na.rm = TRUE),     .groups = \"drop\"   ) %>%   mutate(     lower = mean - sd,     upper = mean + sd,     HUC = as.character(HUC)  # Convert to character for proper y-axis display   ) %>%   # Sort by mean capacity for easier interpretation   arrange(desc(mean))  # Reorder factor levels for sorted display scenario_summary$HUC <- factor(scenario_summary$HUC, levels = rev(scenario_summary$HUC))  # --------------------------------------------------------- # Create the plot # --------------------------------------------------------- ggplot(scenario_summary, aes(x = mean, y = HUC, xmin = lower, xmax = upper)) +   # Add background zones   geom_rect(aes(xmin = 0, xmax = 0.2, ymin = -Inf, ymax = Inf),             fill = \"pink\", alpha = 0.02) +   geom_rect(aes(xmin = 0.2, xmax = 0.5, ymin = -Inf, ymax = Inf),             fill = \"orange\", alpha = 0.02) +   geom_rect(aes(xmin = 0.5, xmax = 0.75, ymin = -Inf, ymax = Inf),             fill = \"yellow\", alpha = 0.02) +   geom_rect(aes(xmin = 0.75, xmax = 1, ymin = -Inf, ymax = Inf),             fill = \"green\", alpha = 0.02) +   # Add points and error bars   geom_point(size = 2) +   geom_errorbarh(height = 0.3) +   # Labels and styling   ggtitle(paste(\"Scenario:\", target_scenario)) +   xlab(\"System Capacity (0 - 1)\") +   ylab(\"Watershed (HUC)\") +   scale_x_continuous(limits = c(0, 1)) +   theme_bw() +   theme(     plot.title = element_text(hjust = 0.5),     panel.grid.minor = element_blank(),     axis.text.y = element_text(size = 7)  # Smaller text for many watersheds   )"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"advanced-comparing-scenario-differences","dir":"Articles","previous_headings":"","what":"Advanced: Comparing Scenario Differences","title":"2. Joe Model Batch Run","text":"Beyond visualizing raw scores, may want quantify much scenario changes capacity relative baseline. helps identify scenarios largest positive negative impact. summary table shows: - mean_capacity: Average system capacity across locations Monte Carlo runs - sd_capacity: Variability capacity scores - min/max_capacity: range outcomes observed","code":"# --------------------------------------------------------- # Calculate mean capacity per scenario (across all locations) # --------------------------------------------------------- scenario_means <- exp_dat %>%   group_by(Scenario) %>%   summarise(     mean_capacity = mean(CE, na.rm = TRUE),     sd_capacity = sd(CE, na.rm = TRUE),     min_capacity = min(CE, na.rm = TRUE),     max_capacity = max(CE, na.rm = TRUE),     .groups = \"drop\"   ) %>%   arrange(desc(mean_capacity))  print(scenario_means) #> # A tibble: 4 × 5 #>   Scenario   mean_capacity sd_capacity min_capacity max_capacity #>   <chr>              <dbl>       <dbl>        <dbl>        <dbl> #> 1 scenario_1         0.335       0.281            0        0.916 #> 2 scenario_2         0.327       0.214            0        0.753 #> 3 scenario_4         0.299       0.223            0        0.811 #> 4 scenario_3         0.204       0.170            0        0.739"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"saving-results-for-further-analysis","dir":"Articles","previous_headings":"","what":"Saving Results for Further Analysis","title":"2. Joe Model Batch Run","text":"can export batch results use analyses reporting:","code":"# --------------------------------------------------------- # Export full results to CSV # --------------------------------------------------------- write.csv(exp_dat, \"joe_model_batch_results.csv\", row.names = FALSE)  # --------------------------------------------------------- # Export scenario summary statistics # --------------------------------------------------------- write.csv(scenario_means, \"scenario_summary.csv\", row.names = FALSE)"},{"path":[]},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"choosing-multiplier-values","dir":"Articles","previous_headings":"Tips for Your Application","what":"Choosing Multiplier Values","title":"2. Joe Model Batch Run","text":"creating scenarios file, consider: Use empirical data available: Climate projections, monitoring data, modeled outputs provide defensible multipliers Document assumptions: Record rationale multiplier value Test sensitivity: Try range multipliers understand sensitive results assumptions Consider interactions: scenario multiple stressor changes may non-linear cumulative effects","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"increasing-monte-carlo-simulations","dir":"Articles","previous_headings":"Tips for Your Application","what":"Increasing Monte Carlo Simulations","title":"2. Joe Model Batch Run","text":"publication decision-making, increase MC_sims get stable estimates:","code":"# Recommended: 100+ simulations for stable uncertainty estimates exp_dat <- JoeModel_Run_Batch(   scenarios = scenarios,   dose = stressor_magnitude,   sr_wb_dat = stressor_response,   MC_sims = 100  # Increase for real applications )"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"automating-plot-generation","dir":"Articles","previous_headings":"Tips for Your Application","what":"Automating Plot Generation","title":"2. Joe Model Batch Run","text":"generate plots watersheds scenarios automatically:","code":"# Example: Generate a PDF with plots for each watershed pdf(\"watershed_scenario_plots.pdf\", width = 6, height = 5) for (huc in unique(exp_dat$HUC)) {   # ... plotting code for each HUC ... } dev.off()"},{"path":"https://essatech.github.io/CEMPRA/articles/a02-joe-model-batch-run.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"2. Joe Model Batch Run","text":"Now can run batch scenarios Joe Model, consider: additional guidance, see CEMPRA Documentation.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"3. Population Model Overview","text":"tutorial covers Population Model component CEMPRA framework. Building Joe Model’s system capacity scores, population model translates cumulative effects demographic impacts target species. end tutorial, understand : - Configure life cycle parameters target species - Run stage-structured matrix population projections - Incorporate density-dependent constraints population growth - Link environmental stressors vital rates (survival, fecundity, capacity) - Compare population trajectories baseline vs. cumulative effect scenarios","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"what-is-the-population-model","dir":"Articles","previous_headings":"Overview","what":"What is the Population Model?","title":"3. Population Model Overview","text":"population model stage-structured matrix model projects hypothetical population forward time. Unlike Joe Model, produces single system capacity score, population model: Tracks simulated individuals multiple life stages (e.g., egg, fry, juvenile, adult) Applies density-dependent constraints using Beverton-Holt Hockey-Stick functions based habitat availability. Links stressors vital rates (survival, fecundity, carrying capacity specific life stages) Produces time series projections showing population abundance changes years allows understand life stages limiting stressors affect population dynamics.","code":""},{"path":[]},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"prerequisites","dir":"Articles","previous_headings":"Overview","what":"Prerequisites","title":"3. Population Model Overview","text":"starting tutorial, : Complete Tutorial 1: Joe Model Overview understand stressor-response relationships basic familiarity population ecology concepts (carrying capacity, density dependence) Review CEMPRA Guidance Document Section Life Cycle Model detailed background","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"3. Population Model Overview","text":"","code":"# Install CEMPRA from GitHub (if not already installed) # library(devtools) # install_github(\"essatech/CEMPRA\")  # Load required packages library(CEMPRA) library(ggplot2)"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"understanding-the-input-data","dir":"Articles","previous_headings":"","what":"Understanding the Input Data","title":"3. Population Model Overview","text":"population model requires several input files: stressor-response stressor-magnitude workbooks files used Joe Model. life cycle profile habitat capacity files new specific population modeling.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"linking-stressors-to-vital-rates","dir":"Articles","previous_headings":"","what":"Linking Stressors to Vital Rates","title":"3. Population Model Overview","text":"key feature population model ability link environmental stressors directly life-stage-specific vital rates. configured Stressor-Response Excel Workbook Life_stages Parameters columns Main worksheet.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"stressor-response-workbook-structure","dir":"Articles","previous_headings":"Linking Stressors to Vital Rates","what":"Stressor-Response Workbook Structure","title":"3. Population Model Overview","text":"Recall Tutorial 1 stressor-response workbook contains Main worksheet indexes stressors. population model, two additional columns critical (Life_stages Parameters columns): Example Main worksheet showing Life_stages Parameters columns carefully defining columns can effecively link stressor-response relationships specific vital rates. stressor-response relationship can linked one vital rate. multiple linkages desired duplicate stressor & stressor-response relationship accordingly Stressor Magnitude Stressor-Response workbook (e.g., SummerStreamTemp_Parr, SummerStreamTemp_Prespawn).","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"the-parameters-column","dir":"Articles","previous_headings":"Linking Stressors to Vital Rates","what":"The Parameters Column","title":"3. Population Model Overview","text":"Stressor-Response workbook Parameters column specifies stressor-response relationship affects vital rate interest. three possible values: Example interpretation: stressor Parameters = \"capacity\" Life_stages = \"stage_0\" reduces fry carrying capacity. system capacity score 0.70, fry capacity (K0) reduced 70% baseline. stressor Parameters = \"survival\" Life_stages = \"stage_1\" reduces stage-1 survival. system capacity score 0.85, stage-1 survival rate multiplied 0.85.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"the-life_stages-column","dir":"Articles","previous_headings":"Linking Stressors to Vital Rates","what":"The Life_stages Column","title":"3. Population Model Overview","text":"Life_stages column specifies life stage(s) (specific vital rate) stressor affects. population model recognizes stage-specific tags several convenient aliases.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"stage-specific-tags-recommended","dir":"Articles","previous_headings":"Linking Stressors to Vital Rates > The Life_stages Column","what":"Stage-Specific Tags (Recommended)","title":"3. Population Model Overview","text":"clarity precision, recommend using explicit stage numbers: Survival Tags Non-Anadromous Populations: Capacity Tags:","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"anadromous-specific-tags","dir":"Articles","previous_headings":"Linking Stressors to Vital Rates > The Life_stages Column","what":"Anadromous-Specific Tags","title":"3. Population Model Overview","text":"anadromous species, additional tags target pre-breeder (Pb) spawner (Breeder - B) classes: Pre-breeder Survival (Pb): Pre-breeder Capacity (Pb): Spawner Capacity (B): Pre-spawn Migration Survival (Anadromous ):","code":""},{"path":[]},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"notes-on-life-stage-tags","dir":"Articles","previous_headings":"Linking Stressors to Vital Rates > The Life_stages Column","what":"Notes on Life Stage Tags","title":"3. Population Model Overview","text":"Tags case-insensitive (converted lowercase internally) Underscores spaces removed processing (e.g., stage_1 stage1 equivalent) can specify multiple life stages separated commas (e.g., stage_1, stage_2) recommend using explicit stage numbers (stage_1, stage_2) rather legacy nicknames clarity","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"part-1-non-anadromous-populations","dir":"Articles","previous_headings":"","what":"Part 1: Non-Anadromous Populations","title":"3. Population Model Overview","text":"’ll start non-anadromous (resident) species life cycle structure simpler. example uses parameters representative Westslope Cutthroat Trout similar resident trout species. Use non-anadromous mode resident trout iteroparous species.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"loading-example-data","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.1 Loading Example Data","title":"3. Population Model Overview","text":"Let’s load example life cycle profile included CEMPRA:","code":"# Load the life cycle parameters file filename_lc <- system.file(\"extdata\", \"life_cycles.csv\", package = \"CEMPRA\") life_cycles <- read.csv(filename_lc)  # View the parameters print(life_cycles) #>                                              Parameters    Name  Value #> 1                                 Number of life stages  Nstage    4.0 #> 2                                        Adult capacity       k  100.0 #> 3                               Spawn events per female  events    1.0 #> 4                                 Eggs per female spawn     eps 3000.0 #> 5                                     spawning interval     int    1.0 #> 6                                          egg survival      SE    0.1 #> 7                                          yoy survival      S0    0.3 #> 8                                             sex ratio      SR    0.5 #> 9                                    Hatchling Survival  surv_1    0.3 #> 10                                    Juvenile Survival  surv_2    0.3 #> 11                                   Sub-adult Survival  surv_3    0.9 #> 12                                       Adult Survival  surv_4    0.9 #> 13                                   Years as hatchling  year_1    1.0 #> 14                                    years as juvenile  year_2    2.0 #> 15                                    years as subadult  year_3    2.0 #> 16                                       years as adult  year_4    5.0 #> 17                      egg survival compensation ratio    cr_E    1.0 #> 18                      yoy survival compensation ratio    cr_0    3.0 #> 19                hatchling survival compensation ratio    cr_1    2.5 #> 20                 juvenile survival compensation ratio    cr_2    2.0 #> 21                 subadult survival compensation ratio    cr_3    1.1 #> 22                    adult survival compensation ratio    cr_4    1.0 #> 23                                maturity as hatchling   mat_1    0.0 #> 24                                 maturity as juvenile   mat_2    0.0 #> 25                                 maturity as subadult   mat_3    0.0 #> 26                                    maturity as adult   mat_4    1.0 #> 27                          variance in eggs per female  eps_sd 1000.0 #> 28            correlation in egg fecundity through time egg_rho    0.1 #> 29 coefficient of variation in stage-specific mortality    M.cv    0.1 #> 30                correlation in mortality through time   M.rho    0.1"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"understanding-the-life-cycle-profile","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.2 Understanding the Life Cycle Profile","title":"3. Population Model Overview","text":"life cycle profile CSV file three columns:","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"key-parameter-groups","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.2 Understanding the Life Cycle Profile","what":"Key Parameter Groups","title":"3. Population Model Overview","text":"Population Structure: Nstage: Number life stages (excluding egg/fry stage 0) k: (OPTIONAL) Adult carrying capacity (used compensation ratios) Survival Rates: SE: Egg survival (density-independent) S0: Age-0 fry/sub-yearling survival (density-independent) surv_1 surv_N: Stage-specific annual survival rates Important: survival values represent density-independent survival (.e., maximum survival absence crowding). Density-dependent effects applied separately. Years Stage: year_1 year_N: Number years individuals spend stage values 1, age-based (Leslie) matrix model Values > 1 allow individuals remain stage multiple years (stage-based model) Fecundity: events: Spawning events per female per year (typically 1) eps: Eggs per female spawner int: Spawning interval years (typically 1) SR: Sex ratio (proportion female, typically 0.5) Maturity Schedule: mat_1 mat_N: Proportion stage sexually mature (0-1) example, stage 4 adults mature (mat_4 = 1) Stochasticity Parameters: eps_sd: Standard deviation eggs per female egg_rho: Correlation fecundity years (0-1) M.cv: Coefficient variation stage-specific mortality M.rho: Correlation mortality years (0-1) Higher correlation values mean good/bad years affect cohorts simultaneously.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"setting-up-the-matrix-model","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.3 Setting Up the Matrix Model","title":"3. Population Model Overview","text":"population model uses two setup functions build mathematical framework: pop_model_matrix_elements() function returns: projection_matrix: numerical transition matrix () life_stages_symbolic: Symbolic (equation) form matrix density_stage_symbolic: Density-dependence modifier matrix life_histories: Derived life history parameters","code":"# Step 1: Initialize population model parameters pop_mod_setup <- pop_model_setup(life_cycles = life_cycles)  # Step 2: Build matrix elements pop_mod_mat <- pop_model_matrix_elements(pop_mod_setup = pop_mod_setup) #> Running with S0 adjusted to s0.1.det...  # View the components created names(pop_mod_mat) #> [1] \"projection_matrix\"      \"life_histories\"         \"life_stages_symbolic\"   #> [4] \"density_stage_symbolic\" \"anadrmous\""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"the-transition-matrix","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.3 Setting Up the Matrix Model","what":"The Transition Matrix","title":"3. Population Model Overview","text":"transition matrix governs individuals move life stages: Reading matrix: Rows represent “” stage; columns represent “” stage top row contains fecundity elements (new recruits mature stages) diagonal elements represent probability staying stage Sub-diagonal elements represent probability advancing next stage","code":"# View the transition matrix A <- pop_mod_mat$projection_matrix print(round(A, 3)) #>      [,1]  [,2]  [,3]   [,4] #> [1,]  0.0 0.000 0.000 45.000 #> [2,]  0.3 0.231 0.000  0.000 #> [3,]  0.0 0.069 0.474  0.000 #> [4,]  0.0 0.000 0.426  0.756"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"eigenanalysis-density-independent-growth","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.4 Eigenanalysis (Density-Independent Growth)","title":"3. Population Model Overview","text":"running full projections, can use eigenanalysis understand basic population dynamics density-independent conditions: Interpreting elasticities: Elasticities show matrix elements greatest proportional influence lambda. Higher values indicate life stages changes largest impact population growth.","code":"# Calculate lambda (intrinsic growth rate) lambda_val <- popbio::lambda(A) cat(\"Lambda (intrinsic growth rate):\", round(lambda_val, 3), \"\\n\") #> Lambda (intrinsic growth rate): 1.211  # Lambda > 1 means population grows exponentially # Lambda < 1 means population declines # Lambda = 1 means stable population  # Calculate elasticities (proportional sensitivity) eigen_results <- popbio::eigen.analysis(A) print(\"Elasticities:\") #> [1] \"Elasticities:\" print(round(eigen_results$elasticities, 3)) #>       [,1]  [,2]  [,3]  [,4] #> [1,] 0.000 0.000 0.000 0.153 #> [2,] 0.153 0.036 0.000 0.000 #> [3,] 0.000 0.153 0.098 0.000 #> [4,] 0.000 0.000 0.153 0.254"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"running-density-dependent-projections","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.5 Running Density-Dependent Projections","title":"3. Population Model Overview","text":"Real populations don’t grow exponentially forever - experience density-dependent constraints. Projection_DD() function projects population forward applying constraints.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"basic-projection-no-stressors","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.5 Running Density-Dependent Projections","what":"Basic Projection (No Stressors)","title":"3. Population Model Overview","text":"population fluctuates around carrying capacity due stochastic variation survival fecundity.","code":"# Extract the components needed for projection life_histories <- pop_mod_mat$life_histories life_stages_symbolic <- pop_mod_mat$life_stages_symbolic density_stage_symbolic <- pop_mod_mat$density_stage_symbolic  # Run population projection for 100 years baseline <- Projection_DD(   M.mx = life_stages_symbolic,       # Transition matrix (symbolic)   D.mx = density_stage_symbolic,     # Density-dependence matrix   H.mx = NULL,                       # Harvest matrix (not used)   dat = life_histories,              # Life history parameters   K = life_histories$Ka,             # Adult carrying capacity   Nyears = 100,                      # Years to simulate   p.cat = 0,                         # Probability of catastrophe   CE_df = NULL                       # No cumulative effect stressors )  # View the output components names(baseline) #> [1] \"pop\"     \"N\"       \"lambdas\" \"vars\"    \"Cat.\"  # Plot population trajectory plot(baseline$pop$year, baseline$pop$N,      type = 'l', lwd = 2, col = \"darkblue\",      xlab = \"Year\", ylab = \"Total Population (N)\",      main = \"Baseline Population Projection (No Stressors)\")"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"understanding-density-dependence","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.5 Running Density-Dependent Projections","what":"Understanding Density Dependence","title":"3. Population Model Overview","text":"model uses Beverton-Holt density dependence default. creates compensatory relationship survival decreases population density approaches carrying capacity: Nt+1=S⋅Nt1+(S−1)⋅NtKN_{t+1} = \\frac{S \\cdot N_t}{1 + \\frac{(S-1) \\cdot N_t}{K}} : - SS = density-independent survival rate - NtN_t = current population size - KK = carrying capacity model also supports Hockey-Stick density dependence, imposes hard cap carrying capacity.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"adding-cumulative-effect-stressors","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.6 Adding Cumulative Effect Stressors","title":"3. Population Model Overview","text":"Now let’s add environmental stressors affect population vital rates. Stressors can target: survival: Reduces survival probability specific life stages capacity: Reduces carrying capacity specific life stages","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"creating-a-simple-stressor-dataset","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.6 Adding Cumulative Effect Stressors","what":"Creating a Simple Stressor Dataset","title":"3. Population Model Overview","text":"","code":"# Create stressor data for a hypothetical location # Stressor 1: Reduces fry carrying capacity by 58% CE_df1 <- data.frame(   HUC = 123,   Stressor = \"Temperature\",   dose = 20,              # Stressor magnitude (e.g., 20 deg C)   sys.cap = 0.42,         # 42% of baseline capacity remains   life_stage = \"stage_0\",   parameter = \"capacity\",   Stressor_cat = \"Temperature\" )  # Stressor 2: Reduces stage-1 survival by 20% CE_df2 <- data.frame(   HUC = 123,   Stressor = \"Sediment\",   dose = 30,              # Stressor magnitude (e.g., 30% fines)   sys.cap = 0.80,         # 80% of baseline survival remains   life_stage = \"stage_1\",   parameter = \"survival\",   Stressor_cat = \"Sediment\" )  # Combine stressors CE_df <- rbind(CE_df1, CE_df2) print(CE_df) #>   HUC    Stressor dose sys.cap life_stage parameter Stressor_cat #> 1 123 Temperature   20    0.42    stage_0  capacity  Temperature #> 2 123    Sediment   30    0.80    stage_1  survival     Sediment"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"comparing-baseline-vs--ce-scenarios","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.7 Comparing Baseline vs. CE Scenarios","title":"3. Population Model Overview","text":"Now let’s run projection stressors compare baseline:  red line shows population suppression environmental stressors applied.","code":"# Run projection WITH cumulative effect stressors ce_projection <- Projection_DD(   M.mx = life_stages_symbolic,   D.mx = density_stage_symbolic,   H.mx = NULL,   dat = life_histories,   K = life_histories$Ka,   Nyears = 100,   p.cat = 0,   CE_df = CE_df )  # Plot comparison plot(baseline$pop$year, baseline$pop$N,      type = 'l', lwd = 2, col = \"black\",      xlab = \"Year\", ylab = \"Total Population (N)\",      main = \"Population Projection: Baseline vs. Cumulative Effects\",      ylim = c(0, max(baseline$pop$N) * 1.1)) lines(ce_projection$pop$year, ce_projection$pop$N,       lwd = 2, col = \"red\") legend(\"topright\",        legend = c(\"Baseline\", \"With Stressors\"),        col = c(\"black\", \"red\"), lwd = 2, bty = \"n\") # Calculate relative impact baseline_median <- median(baseline$pop$N[50:100]) ce_median <- median(ce_projection$pop$N[50:100]) relative_capacity <- ce_median / baseline_median  cat(\"\\nBaseline median abundance:\", round(baseline_median, 0)) #>  #> Baseline median abundance: 96 cat(\"\\nWith stressors median abundance:\", round(ce_median, 0)) #>  #> With stressors median abundance: 87 cat(\"\\nRelative system capacity:\", round(relative_capacity * 100, 1), \"%\\n\") #>  #> Relative system capacity: 90.5 %"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"using-location-specific-habitat-capacities","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations","what":"1.8 Using Location-Specific Habitat Capacities","title":"3. Population Model Overview","text":"realistic modeling, can specify location stage-specific carrying capacities instead (addition ) using compensation ratios.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"habitat-capacity-file-format","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.8 Using Location-Specific Habitat Capacities","what":"Habitat Capacity File Format","title":"3. Population Model Overview","text":"habitat capacity file columns: Important: include columns stages density-dependent bottlenecks. Leave cells blank omit columns stages without capacity constraints.","code":"# View the example habitat capacity file structure filename_dd <- system.file(\"extdata\", \"habitat_dd_k.xlsx\", package = \"CEMPRA\") habitat_dd_k <- readxl::read_excel(filename_dd) print(as.data.frame(habitat_dd_k[1:3, ])) #>   HUC_ID NAME k_stage_0_mean k_stage_1_mean k_stage_2_mean k_stage_3_mean #> 1      1   NA          10000          1e+07          1e+07          1e+05 #> 2      2   NA             NA             NA             NA             NA #> 3      3   NA             NA             NA             NA             NA #>   k_stage_4_mean k_stage_0_cv k_stage_1_cv k_stage_2_cv k_stage_3_cv #> 1           1000          0.1          0.1          0.1          0.1 #> 2             NA           NA           NA           NA           NA #> 3             NA           NA           NA           NA           NA #>   k_stage_4_cv notes #> 1          0.1    NA #> 2           NA    NA #> 3           NA    NA"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"enabling-stage-specific-density-dependence","dir":"Articles","previous_headings":"Part 1: Non-Anadromous Populations > 1.8 Using Location-Specific Habitat Capacities","what":"Enabling Stage-Specific Density Dependence","title":"3. Population Model Overview","text":"use stage-specific capacities, must add density-dependence flags life cycle profile:","code":"# Add these rows to your life_cycles.csv to enable density dependence: # Name         Value # bh_stage_0   TRUE    # Beverton-Holt for egg-to-fry transition # bh_stage_1   TRUE    # Beverton-Holt for fry-to-parr transition # hs_stage_2   TRUE    # Hockey-Stick for stage 2 (hard cap)"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"part-2-anadromous-populations","dir":"Articles","previous_headings":"","what":"Part 2: Anadromous Populations","title":"3. Population Model Overview","text":"Anadromous species (salmon) require different model structure : Individuals spawn die (semelparity) Fish may return spawn different ages (age-3, age-4, age-5) model must track pre-breeders (fish still sea) separately breeders (returning spawners)","code":""},{"path":[]},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"loading-anadromous-example-data-nanaimo-chinook","dir":"Articles","previous_headings":"Part 2: Anadromous Populations","what":"2.2 Loading Anadromous Example Data (Nanaimo Chinook)","title":"3. Population Model Overview","text":"example, ’ll use complete dataset Chinook Salmon Nanaimo River system. includes life cycle profile, stressor data, habitat capacities:","code":"# Load anadromous life cycle profile filename_lc_anad <- system.file(\"extdata\", \"nanaimo/species_profiles/nanaimo_comp_ocean_summer.csv\", package = \"CEMPRA\") life_cycles_anad <- read.csv(filename_lc_anad)  # Load stressor-response workbook filename_sr_anad <- system.file(\"extdata\", \"nanaimo/stressor_response_nanaimo.xlsx\", package = \"CEMPRA\") sr_wb_anad <- StressorResponseWorkbook(filename = filename_sr_anad)  # Load stressor-magnitude workbook filename_sm_anad <- system.file(\"extdata\", \"nanaimo/stressor_magnitude_nanaimo.xlsx\", package = \"CEMPRA\") dose_anad <- StressorMagnitudeWorkbook(filename = filename_sm_anad)  # Load habitat capacities file filename_hab_anad <- system.file(\"extdata\", \"nanaimo/habitat_capacities_nanaimo.csv\", package = \"CEMPRA\") habitat_dd_k_anad <- read.csv(filename_hab_anad)  # View available locations print(unique(dose_anad$HUC_ID)) #> [1] 1 2 3"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"understanding-the-anadromous-life-cycle-profile","dir":"Articles","previous_headings":"Part 2: Anadromous Populations","what":"2.3 Understanding the Anadromous Life Cycle Profile","title":"3. Population Model Overview","text":"","code":"# View key parameters print(life_cycles_anad) #>                                              Parameters          Name  Value #> 1                                 Number of life stages        Nstage      5 #> 2                                            Anadromous    anadromous   TRUE #> 3                                        Adult capacity             k   5000 #> 4                               Spawn events per female        events      1 #> 5                         Eggs per age-3 female spawner         eps_3   1953 #> 6                         Eggs per age-4 female spawner         eps_4   4000 #> 7                         Eggs per age-5 female spawner         eps_5   5200 #> 8                                     Spawning interval           int      1 #> 9                                          Egg survival            SE    0.4 #> 10                                         Fry survival            S0    0.4 #> 11                             Sex ratio male to female            SR    0.5 #> 12                                   Stage 1 to Stage 2        surv_1 0.0498 #> 13                                   Stage 2 to Stage 3        surv_2    0.7 #> 14                                   Stage 3 to Stage 4        surv_3    0.8 #> 15                                   Stage 4 to Stage 5        surv_4    0.9 #> 16                                   Stage 5 to Stage 6        surv_5      0 #> 17                Pre-spawn mortality of Age-3 spawners           u_3      1 #> 18                Pre-spawn mortality of Age-4 spawners           u_4      1 #> 19                Pre-spawn mortality of Age-5 spawners           u_5      1 #> 20                Pre-spawn mortality of Age-6 spawners           u_6      1 #> 21                 Migration survival of Age-3 spawners        smig_3    0.9 #> 22                 Migration survival of Age-4 spawners        smig_4    0.9 #> 23                 Migration survival of Age-5 spawners        smig_5    0.9 #> 24                       compensation ratios - not used          cr_E      1 #> 25                       compensation ratios - not used          cr_0      1 #> 26                       compensation ratios - not used          cr_1      1 #> 27                       compensation ratios - not used          cr_2      1 #> 28                       compensation ratios - not used          cr_3      1 #> 29                       compensation ratios - not used          cr_4      1 #> 30                       compensation ratios - not used          cr_5      1 #> 31                     probability of maturity at age-3         mat_3    0.2 #> 32                     probability of maturity at age-4         mat_4    0.6 #> 33                     probability of maturity at age-5         mat_5      1 #> 34                          variance in eggs per female        eps_sd    500 #> 35            correlation in egg fecundity through time       egg_rho    0.1 #> 36 coefficient of variation in stage-specific mortality          M.cv    0.2 #> 37                correlation in mortality through time         M.rho    0.1 #> 38           DD constraint on fry colonization in river    bh_stage_0   TRUE #> 39              DD constraint on fry rearing in estuary bh_stage_pb_1   TRUE #> 40     Density-dependent constraint on fry colonization   bh_spawners   TRUE #>                                                                  Notes #> 1                                        Max possible spawner age is 6 #> 2                                                                      #> 3                                                             Not used #> 4                                                                      #> 5                                    Avg. from Walters and Korman 2024 #> 6                                           Fix at 4000 from RAMS 2021 #> 7                                    Avg. from Walters and Korman 2024 #> 8                                    Spanwing events occur every year. #> 9                 Avg. upper lim from RAMs & Walters and Korman (2024) #> 10                Avg. upper lim from RAMs & Walters and Korman (2024) #> 11                                          Equal portions male/female #> 12                        from Walters and Korman et al., 2024: Review #> 13                                From Beechie et al., 2021 & W&K 2024 #> 14                                From Beechie et al., 2021 & W&K 2024 #> 15                                From Beechie et al., 2021 & W&K 2024 #> 16                                                      Terminal stage #> 17                                                                     #> 18                                                                     #> 19                                                                     #> 20                                                                     #> 21                                                                     #> 22                                                                     #> 23                                                                     #> 24                                                                     #> 25                                                                     #> 26                                                                     #> 27                                                                     #> 28                                                                     #> 29                                                                     #> 30                                                                     #> 31 Assume 20% from Walters and Korman avg. of East Coast VI Chin Pops. #> 32 Assume 20% from Walters and Korman avg. of East Coast VI Chin Pops. #> 33                                Assume 100% remaining spawn at age-5 #> 34                                                                     #> 35                                                                     #> 36                                                    Previouslly 0.02 #> 37                                                                     #> 38                                                       Beverton-Holt #> 39                                      Beverton-Holt (but set to inf) #> 40                                                       Beverton-Holt"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"the-anadromous-flag","dir":"Articles","previous_headings":"Part 2: Anadromous Populations > 2.3 Understanding the Anadromous Life Cycle Profile","what":"The Anadromous Flag","title":"3. Population Model Overview","text":"important parameter anadromous flag: Setting anadromous = TRUE tells model use anadromous matrix structure.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"age-specific-fecundity","dir":"Articles","previous_headings":"Part 2: Anadromous Populations > 2.3 Understanding the Anadromous Life Cycle Profile","what":"Age-Specific Fecundity","title":"3. Population Model Overview","text":"Unlike non-anadromous models single eps value, anadromous models specify fecundity age: Older fish typically produce eggs, age-specific fecundity captures biological reality.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"age-specific-maturity-schedule","dir":"Articles","previous_headings":"Part 2: Anadromous Populations > 2.3 Understanding the Anadromous Life Cycle Profile","what":"Age-Specific Maturity Schedule","title":"3. Population Model Overview","text":"maturity schedule determines proportion fish return spawn age: example: - 20% surviving fish spawn age 3 - 60% surviving fish spawn age 4 - 100% remaining fish spawn age 5 (maximum age)","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"migration-and-pre-spawn-survival","dir":"Articles","previous_headings":"Part 2: Anadromous Populations > 2.3 Understanding the Anadromous Life Cycle Profile","what":"Migration and Pre-Spawn Survival","title":"3. Population Model Overview","text":"Anadromous models include additional survival parameters: smig_X: Migration survival age-X spawners returning ocean u_X: Pre-spawn survival age-X spawners (survival arrival spawning)","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"density-dependence-flags","dir":"Articles","previous_headings":"Part 2: Anadromous Populations > 2.3 Understanding the Anadromous Life Cycle Profile","what":"Density-Dependence Flags","title":"3. Population Model Overview","text":"Note density-dependence flags bottom life cycle profile: flags tell model life stages density-dependent constraints.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"habitat-capacities-for-anadromous-populations","dir":"Articles","previous_headings":"Part 2: Anadromous Populations","what":"2.4 Habitat Capacities for Anadromous Populations","title":"3. Population Model Overview","text":"Let’s examine habitat capacities file: habitat capacity file anadromous species uses column names distinguish pre-breeders (Pb) breeders (B): example, fry capacity (k_stage_0_mean) spawner capacity (k_stage_B_mean) specified location.","code":"print(habitat_dd_k_anad) #>   HUC_ID           NAME k_stage_0_mean k_stage_Pb_1_mean k_stage_B_mean #> 1      1     Fall Lower         627594                NA          38073 #> 2      2 Summer - Lower        1247555                NA          15384 #> 3      3 Summer - Upper         913589                NA          20943"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"running-the-anadromous-population-model","dir":"Articles","previous_headings":"Part 2: Anadromous Populations","what":"2.5 Running the Anadromous Population Model","title":"3. Population Model Overview","text":"Now let’s run full population model anadromous species habitat capacities:","code":"# Select a target location target_HUC_anad <- 1  # \"Fall Lower\" population  # Run the population model results_anad <- PopulationModel_Run(   dose = dose_anad,   sr_wb_dat = sr_wb_anad,   life_cycle_params = life_cycles_anad,   HUC_ID = target_HUC_anad,   n_years = 100,   MC_sims = 5,   output_type = \"adults\",   habitat_dd_k = habitat_dd_k_anad )  # View output structure head(results_anad) #>   year         N MC_sim group #> 1    0 38073.000      1    ce #> 2    1  2247.734      1    ce #> 3    2  6589.878      1    ce #> 4    3  4434.686      1    ce #> 5    4  7671.632      1    ce #> 6    5  1014.496      1    ce  # Calculate summary statistics baseline_spawners <- median(results_anad$N[results_anad$group == \"baseline\"], na.rm = TRUE) ce_spawners <- median(results_anad$N[results_anad$group == \"ce\"], na.rm = TRUE)  cat(\"\\nBaseline median spawners:\", round(baseline_spawners, 0)) #>  #> Baseline median spawners: 5274 cat(\"\\nWith stressors median spawners:\", round(ce_spawners, 0)) #>  #> With stressors median spawners: 1177 cat(\"\\nRelative capacity:\", round(ce_spawners / baseline_spawners * 100, 1), \"%\\n\") #>  #> Relative capacity: 22.3 %"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"visualizing-anadromous-population-projections","dir":"Articles","previous_headings":"Part 2: Anadromous Populations > 2.5 Running the Anadromous Population Model","what":"Visualizing Anadromous Population Projections","title":"3. Population Model Overview","text":"","code":"# Plot the results ggplot(results_anad, aes(x = year, y = N, color = group)) +   stat_smooth(method = \"loess\", span = 0.2, se = TRUE,               aes(fill = group), alpha = 0.3) +   scale_color_manual(values = c(\"baseline\" = \"darkgreen\", \"ce\" = \"orange\"),                      labels = c(\"baseline\" = \"Baseline\", \"ce\" = \"With Stressors\")) +   scale_fill_manual(values = c(\"baseline\" = \"darkgreen\", \"ce\" = \"orange\"),                     labels = c(\"baseline\" = \"Baseline\", \"ce\" = \"With Stressors\")) +   labs(x = \"Year\", y = \"Spawner Abundance\",        title = \"Anadromous Population Model: Nanaimo Chinook\",        subtitle = paste(\"Location:\", habitat_dd_k_anad$NAME[target_HUC_anad])) +   theme_bw() +   theme(legend.position = \"bottom\",         legend.title = element_blank()) #> `geom_smooth()` using formula = 'y ~ x'"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"comparing-multiple-anadromous-locations","dir":"Articles","previous_headings":"Part 2: Anadromous Populations","what":"2.6 Comparing Multiple Anadromous Locations","title":"3. Population Model Overview","text":"can run model multiple locations compare outcomes:","code":"# Run for all locations all_results <- list()  for (huc in unique(dose_anad$HUC_ID)) {   result <- PopulationModel_Run(     dose = dose_anad,     sr_wb_dat = sr_wb_anad,     life_cycle_params = life_cycles_anad,     HUC_ID = huc,     n_years = 100,     MC_sims = 3,     output_type = \"adults\",     habitat_dd_k = habitat_dd_k_anad   )   result$location <- habitat_dd_k_anad$NAME[habitat_dd_k_anad$HUC_ID == huc]   all_results[[as.character(huc)]] <- result }  # Combine results combined_results <- do.call(rbind, all_results)  # Calculate relative capacity by location location_summary <- aggregate(   N ~ location + group,   data = combined_results[combined_results$year > 50, ],   FUN = median, na.rm = TRUE )  # Reshape for comparison library(reshape2) location_wide <- dcast(location_summary, location ~ group, value.var = \"N\") location_wide$relative_capacity <- location_wide$ce / location_wide$baseline * 100  print(location_wide) #>         location baseline        ce relative_capacity #> 1     Fall Lower 5119.474 1054.9640         20.606885 #> 2 Summer - Lower 8403.093  833.3773          9.917507 #> 3 Summer - Upper 7746.833  383.4239          4.949428"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"running-the-full-population-model-non-anadromous","dir":"Articles","previous_headings":"","what":"Running the Full Population Model (Non-Anadromous)","title":"3. Population Model Overview","text":"PopulationModel_Run() function provides convenient wrapper : Runs Joe Model calculate stressor effects Links stressor effects vital rates life stage Runs population projections without stressors Returns comparative results","code":"# Load all required data filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\") filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\") filename_lc <- system.file(\"extdata\", \"life_cycles.csv\", package = \"CEMPRA\")  sr_wb_dat <- StressorResponseWorkbook(filename = filename_sr) dose <- StressorMagnitudeWorkbook(filename = filename_rm, scenario_worksheet = \"natural_unc\") life_cycle_params <- read.csv(filename_lc)  # Choose a location target_HUC <- dose$HUC_ID[1]  # Run the population model results <- PopulationModel_Run(   dose = dose,   sr_wb_dat = sr_wb_dat,   life_cycle_params = life_cycle_params,   HUC_ID = target_HUC,   n_years = 100,   MC_sims = 5,   output_type = \"adults\" ) #> At least one NA in stressor values array #> Running with S0 adjusted to s0.1.det...  # View output structure head(results) #>   year        N MC_sim group #> 1    0 105.7741      1    ce #> 2    1 109.4446      1    ce #> 3    2 107.4242      1    ce #> 4    3 109.3471      1    ce #> 5    4 106.8963      1    ce #> 6    5 104.1837      1    ce  # Plot results ggplot(results, aes(x = year, y = N, color = group)) +   stat_smooth(method = \"loess\", span = 0.2, se = TRUE,               aes(fill = group), alpha = 0.3) +   scale_color_manual(values = c(\"baseline\" = \"black\", \"ce\" = \"red\"),                      labels = c(\"baseline\" = \"Baseline\", \"ce\" = \"With Stressors\")) +   scale_fill_manual(values = c(\"baseline\" = \"black\", \"ce\" = \"red\"),                     labels = c(\"baseline\" = \"Baseline\", \"ce\" = \"With Stressors\")) +   labs(x = \"Year\", y = \"Adult Abundance\",        title = \"Population Model: Baseline vs. Cumulative Effects\") +   theme_bw() +   theme(legend.position = \"bottom\",         legend.title = element_blank()) #> `geom_smooth()` using formula = 'y ~ x'"},{"path":[]},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"stochasticity-parameters","dir":"Articles","previous_headings":"Advanced Topics","what":"Stochasticity Parameters","title":"3. Population Model Overview","text":"Control population variability parameters: Higher correlation values (egg_rho, M.rho) create synchronized good/bad years across cohorts, increasing population volatility.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"compensation-ratios","dir":"Articles","previous_headings":"Advanced Topics","what":"Compensation Ratios","title":"3. Population Model Overview","text":"Compensation ratios alternative way parameterize density dependence. modify survival based far population carrying capacity: Sadjusted=Sbaseline⋅KK+(CR−1)⋅NtS_{adjusted} = \\frac{S_{baseline} \\cdot K}{K + (CR - 1) \\cdot N_t} CR compensation ratio. Higher CR values create stronger density dependence. Note: recommend using stage-specific habitat capacities instead compensation ratios applications, intuitive directly linked habitat data.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"probability-of-catastrophe","dir":"Articles","previous_headings":"Advanced Topics","what":"Probability of Catastrophe","title":"3. Population Model Overview","text":"p.cat parameter models probability catastrophic event (e.g., disease outbreak, extreme flood) dramatically reduces population:","code":"# Add to life cycle profile: # p.cat    0.05    # 5% probability of catastrophe per generation"},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"3. Population Model Overview","text":"additional guidance building custom species profiles detailed parameter descriptions, see CEMPRA Documentation.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a03-population-model.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"3. Population Model Overview","text":"Caswell, H. (1997). Matrix Methods Population Analysis. Structured-Population Models Marine, Terrestrial, Freshwater Systems (pp. 19-58). Van der Lee, .S. Koops, M.. (2020). Recovery Potential Modelling Westslope Cutthroat Trout. DFO Can. Sci. Advis. Sec. Res. Doc. 2020/046. Davison, R.J. & Satterthwaite, W.H. (2016). Life cycle models Pacific salmon. Pacific Salmon Life Histories (pp. 167-196). Schaub, M. & Kery, M. (2021). Integrated Population Models: Theory Ecological Applications R JAGS. Academic Press.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"4. Population Model Batch Run","text":"Run population model batch mode. population model run separately spatial unit scenario. helper function providers wrapper quickly explore alternative scenarios. Users may change population vital rates, environmental parameters (stressors) stressor-response curves batch model run.","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html","id":"load-input-data","dir":"Articles","previous_headings":"","what":"Load Input Data","title":"4. Population Model Batch Run","text":"example load stressor-response, stressor magnitude file life cycles file. polygon geometry needed run population model. Reset filename_ point local file computer.","code":"library(CEMPRA)      # Load the stress-response workbook     filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\")     sr_wb_dat <- StressorResponseWorkbook(filename = filename_sr)      # Load the stress-magnitude workbook     filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\")     dose <- StressorMagnitudeWorkbook(filename = filename_rm, scenario_worksheet = \"natural_unc\")      # Load the life cycle parameters     filename_lc <- system.file(\"extdata\", \"life_cycles.csv\", package = \"CEMPRA\")     life_cycle_params <- read.csv(filename_lc)"},{"path":"https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html","id":"choose-a-target-spatial-unit","dir":"Articles","previous_headings":"","what":"Choose a Target Spatial Unit","title":"4. Population Model Batch Run","text":"PopulationModel_Run run function runs population model spatial units (e.g., watershed) individually. users wish run population model watersheds, can simply wrap PopulationModel_Run loop apply function. Running watersheds individually advantageous often certain parameters need tweaked various watershed subunits.","code":"# Choose target ID # In this example just use the first watershed HUC_ID <- dose$HUC_ID[1]"},{"path":"https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html","id":"run-the-population-model","dir":"Articles","previous_headings":"","what":"Run the Population Model","title":"4. Population Model Batch Run","text":"Next, can run population model number years n_years batch replicates MC_sims. dose stressor-magnitude data object, sr_wb_dat stressor response workbook data object, life_cycle_params life cycle parameters file target species. stressors optional argument specify whether model run subset stressors (e.g., ‘temperature’, ‘sediment’, left NA model run stressors stressor magnitude file). output data object PopulationModel_Run consist either list dataframe object. output_type argument set “full” list object returned containing abundance time series matrices batch replicate list stage without stressor variables. However, “full” output data object can cumbersome work . convenience, output_type argument can set “adults” return simple dataframe object showing abundance adults across years batch replicates. model always run without cumulative effect stressors - since comparisons always made relative baseline status quo. group variable output dataframe specifies whether model run includes stressor cumulative effect variables “ce” baseline reference conditions “baseline”.","code":"data <- PopulationModel_Run(         dose = dose,         sr_wb_dat = sr_wb_dat,         life_cycle_params = life_cycle_params,         HUC_ID = HUC_ID,         n_years = 150,         MC_sims = 5,         stressors = NA,         output_type = \"adults\"     ) #> At least one NA in stressor values array #> Running with S0 adjusted to s0.1.det...      # Review output     head(data, 3) #>   year         N MC_sim group #> 1    0 213.04017      1    ce #> 2    1  27.98447      1    ce #> 3    2  33.47777      1    ce      # Look the median adult abundance          # with stressor variables (cumulative effects)     median(data$N[which(data$group == \"ce\")], na.rm = TRUE) #> [1] 82.87616          # and without stressor variables (baseline status quo)     median(data$N[which(data$group == \"baseline\")], na.rm = TRUE) #> [1] 97.83644"},{"path":"https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html","id":"visualize-the-time-series-projections","dir":"Articles","previous_headings":"","what":"Visualize the Time Series Projections","title":"4. Population Model Batch Run","text":"Simple plots can included visualize trends","code":"library(ggplot2)      ggplot(data, aes(x = year, y = N, color = group)) +         stat_smooth(method=\"loess\", span=0.1, se=TRUE, aes(fill = group), alpha=0.3) +         theme_bw() +         theme(             legend.position = \"bottom\",             legend.title = element_blank(),             legend.text = element_text(size = 8),             legend.key = element_blank(),             axis.text.x = element_text(angle = 90, hjust = 1, size = 8),             axis.text.y = element_text(size = 8),             #axis.title.x = element_blank(),             #axis.title.y = element_blank(),             strip.text = element_text(size = 8)) #> `geom_smooth()` using formula = 'y ~ x'"},{"path":"https://essatech.github.io/CEMPRA/articles/a04-population-model-batch-run.html","id":"location-and-life-stage-specific-bh-capacities","dir":"Articles","previous_headings":"","what":"Location and life stage-specific BH capacities","title":"4. Population Model Batch Run","text":"Run Example BH carrying capacities Look location specific carrying capacity data Run population model Plot results scenario","code":"# Load the stress-response workbook     filename_sr <- system.file(\"extdata\", \"./species_profiles/stressor_response_coho.xlsx\", package = \"CEMPRA\")     stressor_response <- StressorResponseWorkbook(filename = filename_sr)          # Load the stress-magnitude workbook     filename_rm <- system.file(\"extdata\", \"./species_profiles/stressor_magnitude_coho.xlsx\", package = \"CEMPRA\")     stressor_magnitude <- StressorMagnitudeWorkbook(filename = filename_rm)      # Load the life cycle parameters     filename_lc <- system.file(\"extdata\", \"./species_profiles/life_cycles_coho_nicola.csv\", package = \"CEMPRA\")     life_cycle_params <- read.csv(filename_lc)          # Location and life stage-specific BH capacities     filename_dd <- system.file(\"extdata\", \"./species_profiles/habitat_dd_k_coho.xlsx\", package = \"CEMPRA\")     habitat_dd_k <- readxl::read_excel(filename_dd) head(habitat_dd_k) #> # A tibble: 1 × 11 #>   HUC_ID NAME  k_stage_0_mean k_stage_1_mean k_stage_2_mean k_stage_3_mean #>    <dbl> <lgl> <lgl>                   <dbl> <lgl>                   <dbl> #> 1      1 NA    NA                   10000000 NA                       1000 #> # ℹ 5 more variables: k_stage_0_cv <lgl>, k_stage_1_cv <dbl>, #> #   k_stage_2_cv <lgl>, k_stage_3_cv <dbl>, notes <lgl> data <- PopulationModel_Run(         dose = stressor_magnitude,         sr_wb_dat = stressor_response,         life_cycle_params = life_cycle_params,         HUC_ID = 1,         n_years = 150,         MC_sims = 5,         output_type = \"adults\",         habitat_dd_k = habitat_dd_k     )      # Review output     head(data, 3) #>   year          N MC_sim group #> 1    0   1113.123      1    ce #> 2    1   7403.120      1    ce #> 3    2 237223.444      1    ce      # Look the median adult abundance          # with stressor variables (cumulative effects)     median(data$N[which(data$group == \"ce\")], na.rm = TRUE) #> [1] 1.166062e+22          # and without stressor variables (baseline status quo)     median(data$N[which(data$group == \"baseline\")], na.rm = TRUE) #> [1] 2.675373e+25 library(ggplot2)      ggplot(data, aes(x = year, y = N, color = group)) +         stat_smooth(method=\"loess\", span=0.1, se=TRUE, aes(fill = group), alpha=0.3) +         theme_bw() +         theme(             legend.position = \"bottom\",             legend.title = element_blank(),             legend.text = element_text(size = 8),             legend.key = element_blank(),             axis.text.x = element_text(angle = 90, hjust = 1, size = 8),             axis.text.y = element_text(size = 8),             #axis.title.x = element_blank(),             #axis.title.y = element_blank(),             strip.text = element_text(size = 8)) #> `geom_smooth()` using formula = 'y ~ x'"},{"path":"https://essatech.github.io/CEMPRA/articles/a05-bc-cef.html","id":"import-data-from-the-bc-cef-assessment-units","dir":"Articles","previous_headings":"","what":"Import data from the BC-CEF Assessment Units","title":"5. BC CEF Data Import","text":"example developed transform data outputs BC Provincial Cumulative Effects Framework stressor-magnitude stressor-response file can readily imported Joe Model. BCCEF centered around risk hazard potential assessment units readily available GIS metrics road density, total landcover alternation various natural vulnerability indicators. integrating BCCEF Joe Model, can adjust risk level benchmarks stressor-response curves modify assumptions variables interest. BC CEF: Cumulative Effects Framework https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/cumulative-effects-framework BC CEF: Data Portal (download data ) https://experience.arcgis.com/experience/3aed6c004103495c85252051931a1b29/ begin navigate BC CEF area interest. Launch ERSI application download data area interest. downloaded file available gdb (file geodatabase). following blocks code convert data format compatible Joe Model.","code":"# Install the CEMPRA (first-time users) # devtools::install_github(\"essatech/CEMPRA\") library(CEMPRA)  # Use the sf library and dplyr library(sf); library(dplyr)  # Update the path to your geodatabase file path_to_gdb <- \"C:/Users/mattj/Downloads/NicolaWSs.gdb\" # Load the data bccef <- st_read(path_to_gdb, layer = \"NicolaWSs\")  # Ensure this looks right for your areas of interest plot(st_geometry(bccef))  # Review the attribute colnames(bccef)[1:10]"},{"path":"https://essatech.github.io/CEMPRA/articles/a05-bc-cef.html","id":"isolate-target-variables-of-interest","dir":"Articles","previous_headings":"","what":"Isolate target variables of interest","title":"5. BC CEF Data Import","text":"BC CEF dataset contains numerous indicators, vulnerability metrics, precursor variables informational attributes. ’s best isolate target list meaningful stressor magnitude variables (proxies) bring forward Joe Model stressors. example isolate assessment following variables BC CEF framework aquatic ecosystems:","code":"# Ensure this looks right for your areas of interest plot(st_geometry(bccef))  # Review the attribute colnames(bccef)[1:10]  # Remove any duplicate ID object bccef <- bccef[!(duplicated(bccef$ASSESS_UNI_NUM)), ] bccef <- bccef[!(bccef$ASSESS_UNI_NAME == \"Nicola Watershed\"), ] bccef <- bccef[bccef$AU_AREA_HA < 30000, ]   # Need to cut smaller polygons out of larger polygons plot(st_geometry(bccef), col = \"grey\") plot(st_geometry(bccef))  # ECA_PERCENT head(bccef) summary(bccef$ECA_PERCENT)  var1 <- conversion_bc_cef(   data = bccef,   Stressor = \"ECA_PERCENT\",   Function = \"continuous\",   Units = \"%\",   Low_Limit = 0,   Up_Limit = 50,   value_vector = rev(c(0, 10, 15, 20, 30, 50)),   msc_vector = rev(c(100, 90, 80, 60, 40, 0)) )  summary(bccef$RUNOFF_GEN_POT_SUM) boxplot(bccef$RUNOFF_GEN_POT_SUM ~ bccef$RUNOFF_GEN_POT_RATING) var2 <- conversion_bc_cef(   data = bccef,   Stressor = \"RUNOFF_GEN_POT_SUM\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 4,   Up_Limit = 6,   value_vector = c(6, 5, 4),   msc_vector = c(30, 50, 100) ) var2$stressor_response$sr_data   summary(bccef$RUNOFF_ATTENUATION_SUM) boxplot(bccef$RUNOFF_ATTENUATION_SUM ~ bccef$RUNOFF_ATTENUATION_RATING) var3 <- conversion_bc_cef(   data = bccef,   Stressor = \"RUNOFF_ATTENUATION_SUM\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 2,   Up_Limit = 5,   value_vector = c(2, 3, 4, 5),   msc_vector = c(40, 60, 80, 100) ) var3$stressor_response$sr_data   summary(bccef$HYDROLOGIC_RESP_POT_SUM) boxplot(bccef$HYDROLOGIC_RESP_POT_SUM ~ bccef$HYDROLOGIC_RESP_POT_RATING) var4 <- conversion_bc_cef(   data = bccef,   Stressor = \"HYDROLOGIC_RESP_POT_SUM\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 6,   Up_Limit = 9,   value_vector = c(9, 8, 7, 6),   msc_vector = c(40, 60, 80, 100) ) var4$stressor_response$sr_data   summary(bccef$STREAMFLOW_HAZARD_SUM) boxplot(bccef$STREAMFLOW_HAZARD_SUM ~ bccef$STREAMFLOW_HAZARD_RATING) var5 <- conversion_bc_cef(   data = bccef,   Stressor = \"STREAMFLOW_HAZARD_SUM\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 2,   Up_Limit = 6,   value_vector = c(6, 5, 4, 3, 2),   msc_vector = c(20, 40, 60, 80, 100) ) var5$stressor_response$sr_data   summary(bccef$SEDIMENT_GEN_DELIV_POT_SUM) boxplot(bccef$SEDIMENT_GEN_DELIV_POT_SUM ~ bccef$SEDIMENT_GEN_DELIV_POT_RATING) var6 <- conversion_bc_cef(   data = bccef,   Stressor = \"SEDIMENT_GEN_DELIV_POT_SUM\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 3,   Up_Limit = 6,   value_vector = c(9, 8, 7, 6),   msc_vector = c(40, 60, 80, 100) ) var6$stressor_response$sr_data  table(bccef$SEDIMENT_HAZARD_RATING) bccef$shr <- 1 bccef$shr <- ifelse(bccef$SEDIMENT_HAZARD_RATING == \"H\", 4, bccef$shr) bccef$shr <- ifelse(bccef$SEDIMENT_HAZARD_RATING == \"M\", 3, bccef$shr) bccef$shr <- ifelse(bccef$SEDIMENT_HAZARD_RATING == \"L\", 2, bccef$shr) boxplot(bccef$shr ~ bccef$SEDIMENT_HAZARD_RATING) bccef$SEDIMENT_HAZARD_RATING <- bccef$shr var7 <- conversion_bc_cef(   data = bccef,   Stressor = \"SEDIMENT_HAZARD_RATING\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 1,   Up_Limit = 4,   value_vector = c(4, 3, 2, 1),   msc_vector = c(40, 60, 80, 100) ) var7$stressor_response$sr_data   summary(bccef$RIPARIAN_LANDUSE_SUM) boxplot(bccef$RIPARIAN_LANDUSE_SUM ~ bccef$RIPARIAN_HAZARD_RATING) var8 <- conversion_bc_cef(   data = bccef,   Stressor = \"RIPARIAN_LANDUSE_SUM\",   Function = \"continuous\",   Units = \"\",   Low_Limit = 3,   Up_Limit = 7,   value_vector = c(3, 4, 5, 6, 7),   msc_vector = c(20, 40, 60, 80, 100) ) var8$stressor_response$sr_data"},{"path":"https://essatech.github.io/CEMPRA/articles/a05-bc-cef.html","id":"compile-objects-together-and-export-files","dir":"Articles","previous_headings":"","what":"Compile objects together and export files","title":"5. BC CEF Data Import","text":"","code":"all <- list(var1, var2, var3,              var4, var5, var6,             var7, var8)  sm_dat <- list() sr_main <- list() sr_dat <- list() sheet_names <- c()  for(i in 1:length(all)) {      this_set <- all[[i]]   sm_dat[[i]] <- this_set$stressor_magnitude   sr_main[[i]] <- this_set$stressor_response$sr_main   sr_dat[[i]] <- this_set$stressor_response$sr_data   sheet_names <- c(sheet_names, this_set$stressor_response$sr_name)  }  sm_dat <- do.call(\"rbind\", sm_dat) sr_main <- do.call(\"rbind\", sr_main)  sr_out <- append(list(sr_main), sr_dat) names(sr_out) <- c(\"Main\", sheet_names)  writexl::write_xlsx(sm_dat, path = \"stressor_magnitude.xlsx\") writexl::write_xlsx(sr_out, path = \"stressor_response.xlsx\")   # Export geometry bccef_geom <- bccef[, c(\"ASSESS_UNI_NUM\", \"ASSESS_UNI_NAME\")] colnames(bccef_geom) <- c(\"HUC_ID\", \"NAME\", \"Shape\") sf::st_write(bccef_geom, dsn = \"watersheds.gpkg\", delete_dsn = TRUE)"},{"path":"https://essatech.github.io/CEMPRA/articles/a06-population-model-sensitivity.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"6. Population Model Evaluation","text":"can compare sensitivity parameters within population model. useful understand parameters less sensitive perturbations. example swap different life cycle profiles populations Chinook Salmon see sensitivity input parameters changes results. use stressor-response stressor-magnitude values Nanaimo River Chinook salmon, swap life cycle profile data following populations: Nanaimo River Summer Chinook (vital rates DFO-RAMs). Chehalis River Spring/Fall Chinook coastal Washington (using parameters published Beechie et al., 2021). Columbia River Chinook Wenatchee River (using parameters Honea et al., 2009: Freshwater Biology). Nicola River spring-run Chinook interior BC (DFO-RAMs 2021).","code":""},{"path":"https://essatech.github.io/CEMPRA/articles/a06-population-model-sensitivity.html","id":"load-input-data","dir":"Articles","previous_headings":"","what":"Load Input Data","title":"6. Population Model Evaluation","text":"example load stressor-response, stressor magnitude file life cycles file. polygon geometry needed run population model. Reset filename_ point local file computer. load Nanaimo River Chinook salmon data starting point.","code":"library(CEMPRA)    # Stressor Magnitude   fname <- system.file(\"extdata/nanaimo/stressor_magnitude_nanaimo.xlsx\", package = \"CEMPRA\")   dose <- StressorMagnitudeWorkbook(filename = fname)   dose$SD <- 0    # Stressor Response   fname <- system.file(\"extdata/nanaimo/stressor_response_nanaimo.xlsx\", package = \"CEMPRA\")   sr_wb_dat <- StressorResponseWorkbook(filename = fname)    # Load location and habitat capacities   filename <- system.file(\"extdata/nanaimo/habitat_capacities_nanaimo.csv\", package = \"CEMPRA\")   habitat_capcities <- read.csv(filename, stringsAsFactors = FALSE)        # Load the life cycle parameters   filename_lc <- system.file(\"extdata/nanaimo/species_profiles/nanaimo_comp_ocean_summer.csv\", package = \"CEMPRA\")   life_cycle_params <- read.csv(filename_lc)"},{"path":"https://essatech.github.io/CEMPRA/articles/a06-population-model-sensitivity.html","id":"target-populations","dir":"Articles","previous_headings":"","what":"Target Populations","title":"6. Population Model Evaluation","text":"following habitat capacities files lists target populations. density-dependent constraints esimtate capacities absence stressors assume 100% stream area suitable spawning (e.g., gravel coverage = 100% spawning suitability = 100%). specific stressors targetting capacities shink numbers realistic estimates. Lower Nanaimo River Fall-Run Chinook Lower Nanaimo River Summer-Run Chinook Upper Nanaimo River Spring/Summer-Run Chinook","code":"print(habitat_capcities) #>   HUC_ID           NAME k_stage_0_mean k_stage_Pb_1_mean k_stage_B_mean #> 1      1     Fall Lower         627594                NA          38073 #> 2      2 Summer - Lower        1247555                NA          15384 #> 3      3 Summer - Upper         913589                NA          20943  # Focus analysis on the Lower Nanaimo River Summer-Run Chinook (1) HUC_ID <- 2"},{"path":"https://essatech.github.io/CEMPRA/articles/a06-population-model-sensitivity.html","id":"run-the-population-model","dir":"Articles","previous_headings":"","what":"Run the Population Model","title":"6. Population Model Evaluation","text":"Next, can run population model number years n_years batch replicates MC_sims.","code":"data <- PopulationModel_Run(         dose = dose,         sr_wb_dat = sr_wb_dat,         life_cycle_params = life_cycle_params,         HUC_ID = 2, # Lower Summer-run Chinook         n_years = 200, # run for 200 years         MC_sims = 5, # batch replicates         habitat_dd_k = habitat_capcities # Population-specific carrying capacities     )      # Model returns object with all data nested in a list object     names(data) #> [1] \"ce\"       \"baseline\" \"MC_sims\"     # ce = with cumulative effect stressors          # 5 batch replicates     length(data$ce) #> [1] 5          # Look at replicate 2 of 5     names(data$ce[[2]]) #> [1] \"pop\"     \"N\"       \"lambdas\" \"info\"          # We want to review the N object that contains the population abundance in each stage class     tail(round(data$ce[[2]]$N, 0)) #>           K1   K2   K3  K4  K5  K6  K7 #> [196,] 19698 2660  382 732  84 984  95 #> [197,] 71512  335 1480 134 339 185 603 #> [198,] 50142 3531  170 452  37 618 108 #> [199,] 54265 3497 2082  55 454  73 352 #> [200,] 58136 2445 1681 676 378 917  44 #> [201,] 67526 1613 1368 595 308 806 530"},{"path":"https://essatech.github.io/CEMPRA/articles/a06-population-model-sensitivity.html","id":"visualize-the-time-series-projections","dir":"Articles","previous_headings":"","what":"Visualize the Time Series Projections","title":"6. Population Model Evaluation","text":"Simple plots can included visualize trends","code":"spawners <- pop_model_get_spawners(data = data,                                    life_stage = \"spawners\",                                    life_cycle_params = life_cycle_params)  head(spawners) #>   location_id rep_id year spawners #> 1           2      1    1    15384 #> 2           2      1    2     1649 #> 3           2      1    3     2277 #> 4           2      1    4     1759 #> 5           2      1    5     1663 #> 6           2      1    6     1134  library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union summary_data <- spawners %>%   filter(year > 50) %>%   group_by(location_id, year) %>%   summarize(     mean_spawners = mean(spawners),     sd_spawners = sd(spawners),     .groups = 'drop'   ) head(summary_data) #> # A tibble: 6 × 4 #>   location_id  year mean_spawners sd_spawners #>         <dbl> <int>         <dbl>       <dbl> #> 1           2    51          830.        305. #> 2           2    52          957         682. #> 3           2    53          897.        502. #> 4           2    54         1088         471. #> 5           2    55         1293.        489. #> 6           2    56         1044.        353.  library(ggplot2) # Create the ggplot ggplot(summary_data, aes(x = year, y = mean_spawners, group = location_id)) +   geom_line(color = \"blue\", size = 1) +  # Line for mean spawners   geom_ribbon(     aes(ymin = mean_spawners - sd_spawners, ymax = mean_spawners + sd_spawners),     fill = \"blue\",     alpha = 0.2   ) +  # Shading for ±1 standard deviation   labs(title = \"Time Series of Spawners\", x = \"Simulation Year\", y = \"Number of Spawners (N)\") +   theme_minimal() +   theme(plot.title = element_text(hjust = 0.5), text = element_text(size = 12)) #> Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0. #> ℹ Please use `linewidth` instead. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated."},{"path":"https://essatech.github.io/CEMPRA/articles/a06-population-model-sensitivity.html","id":"location-and-life-stage-specific-bh-capacities","dir":"Articles","previous_headings":"","what":"Location and life stage-specific BH capacities","title":"6. Population Model Evaluation","text":"Run Example BH carrying capacities","code":""},{"path":"https://essatech.github.io/CEMPRA/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Matthew Bayly. Author, maintainer. Kyle Wilson. Author.           Population model development Andrew Paul. Author.           Original development Joe Model Jordan Rosenfeld. Author. ESSA Technologies Ltd.. Copyright holder.","code":""},{"path":"https://essatech.github.io/CEMPRA/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Bayly M, Wilson K, Paul , Rosenfeld J (2026). CEMPRA: Cumulative Effects Model Prioritizing Recovery Actions (CEMPRA). R package version 0.2.0, https://essatech.github.io/CEMPRA/.","code":"@Manual{,   title = {CEMPRA: Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)},   author = {Matthew Bayly and Kyle Wilson and Andrew Paul and Jordan Rosenfeld},   year = {2026},   note = {R package version 0.2.0},   url = {https://essatech.github.io/CEMPRA/}, }"},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"cempra-","dir":"","previous_headings":"","what":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Cumulative Effects Model Prioritizing Recovery Actions (CEMPRA) cumulative effects modelling framework. CEMPRA tool uses series standardized stressor-response functions link environmental attributes system capacity productivity target species system. framework designed generalizable, simple, versatile users can apply model various geographic regions, contexts, systems, species. name suggests, CEMPRA tool helps prioritize recovery actions data-limited species species--risk, flexibility accommodate data-rich data-poor study systems. CEMPRA tool accessible open-source R package R Shiny interactive web application.","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"key-features","dir":"","previous_headings":"","what":"Key Features","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Stressor-Response Framework: Link environmental stressors system capacity using customizable dose-response relationships Joe Model: Calculate cumulative system capacity across multiple stressors locations Density-Dependence Options: Support Beverton-Holt Hockey-Stick density-dependent constraints life stage Anadromous & Resident Life Histories: Model anadromous (salmon) non-anadromous (resident) populations Batch Processing: Run scenarios across multiple locations stressor combinations Sensitivity Analysis: Evaluate parameter uncertainty identify key drivers","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"project-components","dir":"","previous_headings":"","what":"Project Components","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"GitHub Repository R-Package: https://github.com/essatech/CEMPRA GitHub Repository R-Shiny Application: https://github.com/essatech/CEMPRAShiny LIVE Online R-Shiny Application: https://essa.shinyapps.io/CEMPRAShiny/ R-Package Tutorials: https://essatech.github.io/CEMPRA/index.html Guidance Document (Realtime Updates): https://mattjbayly.github.io/CEMPRA_documentation/ Guidance Document (2024 pdf): https://www.essa.com/wp-content/uploads/2024/05/Guideline_Documentation_Report-2024.03.14.pdf","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"shiny-app","dir":"","previous_headings":"","what":"Shiny App","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Shiny App Tutorial Video | Access tool","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"easiest way install CEMPRA package within RStudio IDE using remotes::install_github(). time package published CRAN default install.packages() work. Instead use remotes (devtools) install package directly GitHub:","code":"# You may need to install remotes library(remotes) remotes::install_github(\"essatech/CEMPRA\")"},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"tutorials","dir":"","previous_headings":"","what":"Tutorials","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Detailed tutorials available package vignettes: Additional guidance available CEMPRA Documentation: Setup Installation Data Inputs","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"package-contributors","dir":"","previous_headings":"","what":"Package Contributors","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"broad collaboration Fisheries Oceans Canada (DFO), B.C. Ministry Environment Climate Change Strategy (ECCS), Alberta Environment Parks (AEP), Simon Fraser University (SFU). Contributors include: Matthew Bayly: MJBA, Core application development Alexandra Tekatch: ESSA, Application development Jordan Rosenfeld: Project design coordination; ECC Aquatic Ecologist Andrew Paul: Collaborator; AEP Research Scientist Lauren Jarvis: Collaborator; AEP Research Scientist Eva Enders: Project Lead; DFO Research Scientist Kyle Wilson: Population model development Isuru Dharmasena: Core Shiny app development Julian Heavyside: ESSA Technologies Ltd, R package Shiny app development support Alejandra Urcelay Pedro Gonzalez Marc Porter","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"use CEMPRA research, please cite :","code":"Bayly, M., Tekatch, A., Rosenfeld, J., Paul, A., Jarvis, L., Enders, E., & Wilson, K. (2024). CEMPRA: Cumulative Effects Model for Prioritizing Recovery Actions. R package. https://github.com/essatech/CEMPRA"},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"project licensed MIT License - see LICENSE file details.","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Please note CEMPRA package released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"reporting-bugs-and-issues","dir":"","previous_headings":"","what":"Reporting Bugs and Issues","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"report bugs request features, please open issue : https://github.com/essatech/CEMPRA/issues","code":""},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"rebuilding-r-package-locally","dir":"","previous_headings":"Reporting Bugs and Issues","what":"Rebuilding R-package locally","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Helpful commands run deploy package locally:","code":"# Build and test package library(testthat) library(devtools) rm(list = ls())      # Clear memory devtools::load_all() # Load functions devtools::document() # Update documentation devtools::test()     # Run tests devtools::check()    # Operating system test"},{"path":"https://essatech.github.io/CEMPRA/index.html","id":"re-install-r-package-locally","dir":"","previous_headings":"Reporting Bugs and Issues","what":"Re-install R-package locally","title":"Cumulative Effects Model for Prioritizing Recovery Actions (CEMPRA)","text":"Helpful commands install package source:","code":"remove.packages(\"CEMPRA\") # Remove local installation install.packages(getwd(), repos = NULL, type = \"source\") # library(CEMPRA) # ?SystemCapacity"},{"path":"https://essatech.github.io/CEMPRA/reference/E_est.html","id":null,"dir":"Reference","previous_headings":"","what":"E_est — E_est","title":"E_est — E_est","text":"E_est","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/E_est.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"E_est — E_est","text":"","code":"E_est(N, dat)"},{"path":"https://essatech.github.io/CEMPRA/reference/E_est.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"E_est — E_est","text":"Egg count - number egg produced pop annually","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/E_est_anadromous.html","id":null,"dir":"Reference","previous_headings":"","what":"E_est_anadromous — E_est_anadromous","title":"E_est_anadromous — E_est_anadromous","text":"E_est_anadromous","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/E_est_anadromous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"E_est_anadromous — E_est_anadromous","text":"","code":"E_est_anadromous(N, dat, spanwing_years)"},{"path":"https://essatech.github.io/CEMPRA/reference/E_est_anadromous.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"E_est_anadromous — E_est_anadromous","text":"Egg count - number egg produced pop annually anadromous","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run.html","id":null,"dir":"Reference","previous_headings":"","what":"Joe Model Run — JoeModel_Run","title":"Joe Model Run — JoeModel_Run","text":"Runs Joe Model.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Joe Model Run — JoeModel_Run","text":"","code":"JoeModel_Run(   dose = NA,   sr_wb_dat = NA,   MC_sims = 100,   stressors = NA,   adult_sys_cap = FALSE,   socioeconomic_inputs = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Joe Model Run — JoeModel_Run","text":"dose dataframe. Stressor magnitude file exported StressorMagnitudeWorkbook(). sr_wb_dat list object. Stressor response workbook returned StressorResponseWorkbook(). MC_sims numeric. set number Monte Carlo simulations Joe Model. stressors (optional) character vector stressor names include Joe Model. Leave default value NA wish include stressors applicable adult life stage provide character vector stressors want run model subset stressors. adult_sys_cap Joe Model run variables identified adult system capacity. socioeconomic_inputs (optional) list object. Socioeconomic inputs returned SocioEconomicWorkbook().","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Joe Model Run — JoeModel_Run","text":"list object following components: ce.df dataframe. Cumulative effects data frame columns HUC, simulation, CE (cumulative effect). sc.dose.df dataframe. Stressor-specific system capacity dose data frame columns HUC, Stressor, simulation, dose, sys.cap, int.type, link. socioeconomic_inputs (optional) list object. Socioeconomic inputs returned SocioEconomicWorkbook() socioeconomic_inputs provided function. set number Monte Carlo simulations Joe model.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Joe Model Run — JoeModel_Run","text":"Runs Joe Model cumulative system capacity across stressors watersheds. Note stressors applicable 'adult' Life_stages 'main_sheet' Stressor Response workbook included Joe Model. socioeconomic_inputs can optionally supplied run Joe Model socioeconomic inputs reductions.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Joe Model Run — JoeModel_Run","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA)  # Load in the sample data from the reference Excel workbook filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\") filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\") # Stressor Magnitue and Doese Response Workbooks dose <- StressorMagnitudeWorkbook(filename = filename_rm) sr_wb_dat <- StressorResponseWorkbook(filename = filename_sr)  # Run the Joe Model jmr <- JoeModel_Run(dose = dose,              sr_wb_dat = sr_wb_dat,              MC_sims = 100)  # The Joe model holds cumulative effects data frame # and sc.dose.df for individual stressors names(jmr)  # Evaluate the cumulative system capacity summary(jmr$ce.df$CE) } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run_Batch.html","id":null,"dir":"Reference","previous_headings":"","what":"Batch Joe Model Run — JoeModel_Run_Batch","title":"Batch Joe Model Run — JoeModel_Run_Batch","text":"Batch version JoeModel_Run across scenarios input file.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run_Batch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Batch Joe Model Run — JoeModel_Run_Batch","text":"","code":"JoeModel_Run_Batch(scenarios = NA, dose = NA, sr_wb_dat = NA, MC_sims = 10)"},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run_Batch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Batch Joe Model Run — JoeModel_Run_Batch","text":"scenarios dataframe. Custom scenarios dataframe columns Scenario (scenario ID), Stressor (stressor name), Metric (either Mean SD) Multiplier (numeric multiplier). dose dataframe. Stressor magnitude file exported StressorMagnitudeWorkbook(). sr_wb_dat list object. Stressor response workbook returned StressorResponseWorkbook(). MC_sims numeric. set number Monte Carlo simulations Joe Model. set number Monte Carlo simulations Joe model.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run_Batch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Batch Joe Model Run — JoeModel_Run_Batch","text":"dataframe system capacity results HUC scenario.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run_Batch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Batch Joe Model Run — JoeModel_Run_Batch","text":"Runs Joe Model cumulative system capacity across multiple scenarios. See vignette custom input file format.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/JoeModel_Run_Batch.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Batch Joe Model Run — JoeModel_Run_Batch","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) library(dplyr) library(ggplot2)  # Import stressor-magnitude workbook filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\") stressor_magnitude <- StressorMagnitudeWorkbook(filename = filename_rm, scenario_worksheet = \"natural_unc\")  # Import stressor-response workbook filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\") stressor_response <- StressorResponseWorkbook(filename = filename_sr)  # Import the custom scenarios workbook filename_batch <- system.file(\"extdata\", \"scenario_batch_joe.xlsx\", package = \"CEMPRA\") scenarios <- readxl::read_excel(filename_batch)   # Run the Joe Model with batch scenarios exp_dat <- JoeModel_Run_Batch(scenarios = scenarios, dose = stressor_magnitude,  sr_wb_dat = stressor_response, MC_sims = 3)  #----------------------------------------------------- # Plot result for single HUC - filter by name or ID hub_sub <- exp_dat[exp_dat$HUC == 1701010204, ] plot_title <- paste0(\"Watershed Name - \", 1701010204)  # Add mean and error bars (SD) hub_sb <- hub_sub %>%   group_by(Scenario) %>%   summarise(     mean = mean(CE, na.rm = TRUE),     sd = sd(CE, na.rm = TRUE)   )  hub_sb$lower <- hub_sb$mean - hub_sb$sd hub_sb$upper <- hub_sb$mean + hub_sb$sd  ggplot(hub_sb, aes(x = mean, y = Scenario, xmin = lower, xmax = upper)) +   geom_rect(aes(xmin = 0, xmax = 0.2, ymin = -Inf, ymax = Inf),     fill = \"pink\", alpha = 0.02   ) +   geom_rect(aes(xmin = 0.2, xmax = 0.5, ymin = -Inf, ymax = Inf),     fill = \"orange\", alpha = 0.02   ) +   geom_rect(aes(xmin = 0.5, xmax = 0.75, ymin = -Inf, ymax = Inf),     fill = \"yellow\", alpha = 0.02   ) +   geom_rect(aes(xmin = 0.75, xmax = 1, ymin = -Inf, ymax = Inf),     fill = \"green\", alpha = 0.02   ) +   geom_point() +   geom_errorbarh(height = .2) +   ggtitle(plot_title) +   xlab(\"System Capacity (0 - 1)\") +   ylab(\"Recovery Scenario\") +   theme_bw()  #----------------------------------------------------- # Plot result for single scenario sen_sub <- exp_dat[exp_dat$Scenario == \"scenario_1\", ] plot_title <- paste0(\"Scenario 1 ...\")  # Add mean and error bars (SD) sen_sb <- sen_sub %>%   group_by(HUC) %>%   summarise(     mean = mean(CE, na.rm = TRUE),     sd = sd(CE, na.rm = TRUE)   )  sen_sb$lower <- sen_sb$mean - sen_sb$sd sen_sb$upper <- sen_sb$mean + sen_sb$sd  sen_sb$HUC <- as.character(sen_sb$HUC)  ggplot(sen_sb, aes(x = mean, y = HUC, xmin = lower, xmax = upper)) +   geom_rect(aes(xmin = 0, xmax = 0.2, ymin = -Inf, ymax = Inf),     fill = \"pink\", alpha = 0.02   ) +   geom_rect(aes(xmin = 0.2, xmax = 0.5, ymin = -Inf, ymax = Inf),     fill = \"orange\", alpha = 0.02   ) +   geom_rect(aes(xmin = 0.5, xmax = 0.75, ymin = -Inf, ymax = Inf),     fill = \"yellow\", alpha = 0.02   ) +   geom_rect(aes(xmin = 0.75, xmax = 1, ymin = -Inf, ymax = Inf),     fill = \"green\", alpha = 0.02   ) +   geom_point() +   geom_errorbarh(height = .2) +   ggtitle(plot_title) +   xlab(\"System Capacity (0 - 1)\") +   ylab(\"Recovery Scenario\") +   theme_bw() } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/K_adj_old.html","id":null,"dir":"Reference","previous_headings":"","what":"K_adj_old — K_adj_old","title":"K_adj_old — K_adj_old","text":"K_adj_old","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/K_adj_old.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"K_adj_old — K_adj_old","text":"","code":"K_adj_old(replicates = 100, dat, ncores, mx, dx, Nyears = 250, enviro)"},{"path":"https://essatech.github.io/CEMPRA/reference/Nb_est.html","id":null,"dir":"Reference","previous_headings":"","what":"Nb_est — Nb_est","title":"Nb_est — Nb_est","text":"Nb_est","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/Nb_est.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Nb_est — Nb_est","text":"","code":"Nb_est(N, mat)"},{"path":"https://essatech.github.io/CEMPRA/reference/PopulationModel_Run.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model Run — PopulationModel_Run","title":"Population Model Run — PopulationModel_Run","text":"Runs population model stressors stressor-response relationships","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/PopulationModel_Run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model Run — PopulationModel_Run","text":"","code":"PopulationModel_Run(   dose = NA,   sr_wb_dat = NA,   life_cycle_params = NA,   HUC_ID = NA,   n_years = 100,   MC_sims = 10,   stressors = NA,   output_type = \"full\",   habitat_dd_k = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/PopulationModel_Run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model Run — PopulationModel_Run","text":"dose dataframe. Stressor magnitude dataset imported StressorMagnitudeWorkbook(). sr_wb_dat list object. Stressor response workbook imported StressorResponseWorkbook(). life_cycle_params dataframe. Life cycle parameters. HUC_ID character. HUC_ID location unit. Can one HUC_ID (array). n_years numeric. Number years run population. MC_sims numeric. set number Monte Carlo simulations Population Model. stressors (optional) character vector stressor names include Population Model. Leave default value NA wish include stressors applicable population model. output_type (optional) character. Set \"full\" data \"adults\" adult data. habitat_dd_k (optional) dataframe location stage-specific habitat capacity k values target species. used dataframe override capacity estimates","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/PopulationModel_Run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model Run — PopulationModel_Run","text":"List object population model outputs. include population vectors Monte Carlo simulation year. List objects names include \"ce\" runs stressors \"baseline\" runs without stressors.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/PopulationModel_Run.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model Run — PopulationModel_Run","text":"Runs population model within Joe Model stress-response framework. population model run independently single sub-watershed unit (HUC_ID). Inputs PopulationModel_Run include stressor-response stressor magnitude workbooks well life cycle parameters object.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/PopulationModel_Run.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Population Model Run — PopulationModel_Run","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/Projection_DD.html","id":null,"dir":"Reference","previous_headings":"","what":"Project matrix with Density Dependence — Projection_DD","title":"Project matrix with Density Dependence — Projection_DD","text":"Project matrix model forward time density dependence.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/Projection_DD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Project matrix with Density Dependence — Projection_DD","text":"","code":"Projection_DD(   M.mx = NA,   D.mx = NULL,   H.mx = NULL,   dat = NA,   Nyears = 100,   K = NA,   p.cat = NA,   CE_df = NULL,   K_adj = FALSE,   stage_k_override = NULL,   bh_dd_stages = NULL,   anadromous = FALSE,   alt_return = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/Projection_DD.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Project matrix with Density Dependence — Projection_DD","text":"M.mx projection matrix expression D.mx matrix density-dependence effect H.mx harm projection matrix dat Life history data Nyears Years run simulation K population carrying Capacity adults (mature individuals). Used back-calculating stage-specific carrying capacities compensation ratios. Also used anadromous model setting K adult spawners (across age classes). p.cat Probability catastrophic event. CE_df Cumulative effect data frame. Data frame identifying cumulative effects stressors targets system capacity population parameter, , target life stages. K_adj Boolean. K_adj run. Defaults false. stage_k_override Vector K values egg fry (age-0), fry (age-0) stage_1, stage_1 stage_2, etc. Defaults NULL compensation ratios. set, values override adult K value density dependence Beverton-Holt. NA values used stages constraints. example, fry stage_1 bottle neck set 3000, resulting vector look like c(NA, 3000, NA): 1. Egg fry (K), NA - constraint 2. Fry stage_1 (K), constrained 3000 fry entering stage_1 3. stage_1 stage_2 (K), NA - constraint anadromous species spawner capacity constraint, create vector NAs equal number stages + 1 set spawner capacity K input parameter function. bh_dd_stages Optional Character vector life stages c(\"dd_hs_0\", \"bh_stage_1\", \"bh_stage_2\", \"bh_stage_3\", ...) apply classical Beverton-Holt density-dependence. used place compensation ratios set. Use \"dd_hs_0\" egg--fry k, \"bh_stage_1\" fry stage_1 k \"bh_stage_2\" stage_1 stage_2 k etc. Densities capped value transition stage. anadromous Boolean. true, model apply anadromous life history parameters. Defaults false. alt_return Character. Alternative return objects internal use.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/Projection_DD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Project matrix with Density Dependence — Projection_DD","text":"list object projected years, population size, lambda, fecundity, survival, catastrophic events.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/Projection_DD.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Project matrix with Density Dependence — Projection_DD","text":"function runs population projections forward time. better use PopulationModel_Run (higher-level function) ensure everything input correctly anadromous non-anadromous runs. Life-cycle specific stressors (set) applied based values CE_df table. several ways implement density dependence. deterministic projection matrix using popbio::stable.stage initial parameters based arguments provided. Applies CE stressors appropriate targets based CE_df. population modeling components contained within function. Users define projection matrix, density-dependence matrix, harm projection matrix, life history parameters, years simulate, carrying capacity, catastrophic event probabilities cumulative effects data frame (CE_df). run function project population forward time. See vignette tutorial Population Model Overview details instructions.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicRun.html","id":null,"dir":"Reference","previous_headings":"","what":"Run SocioEconomic Cost Calculations — SocioEconomicRun","title":"Run SocioEconomic Cost Calculations — SocioEconomicRun","text":"Provides draft cost calculations socioeconomic inputs.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicRun.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run SocioEconomic Cost Calculations — SocioEconomicRun","text":"","code":"SocioEconomicRun(socioeconomic_inputs = NA, deterministic = FALSE)"},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicRun.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run SocioEconomic Cost Calculations — SocioEconomicRun","text":"socioeconomic_inputs list object socioeconomic inputs returned SocioEconomicWorkbook(). deterministic Boolean. Defaults FALSE. TRUE model run without stochasticity.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicRun.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run SocioEconomic Cost Calculations — SocioEconomicRun","text":"list object cost area summary calculations included","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicRun.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run SocioEconomic Cost Calculations — SocioEconomicRun","text":"Internal function run within Joe Model perform socioeconomic calculations.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicRun.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run SocioEconomic Cost Calculations — SocioEconomicRun","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) filename <- system.file(\"extdata\", \"socio_economic/socio_economic_input.xlsx\", package = \"CEMPRA\") socioeconomic_inputs <- SocioEconomicWorkbook(filename = filename) socioeconomic_inputs <- SocioEconomicRun(socioeconomic_inputs = socioeconomic_inputs)  } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicWorkbook.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","title":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","text":"Extract socio economic data sheet Excel workbook.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicWorkbook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","text":"","code":"SocioEconomicWorkbook(filename = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicWorkbook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","text":"filename string. Relative file name stressor response Excel workbook.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicWorkbook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","text":"list object worksheet organized separate data frames.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicWorkbook.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","text":"information data format requirements, see manual.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SocioEconomicWorkbook.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Socio Economic Data from Excel Workbook — SocioEconomicWorkbook","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) filename <- system.file(\"extdata\", \"socio_economic/socio_economic_input.xlsx\", package = \"CEMPRA\") socioeconomic_inputs <- SocioEconomicWorkbook(filename = filename) } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/StressorMagnitudeWorkbook.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Stressor Magnitude Data from Excel Workbook — StressorMagnitudeWorkbook","title":"Get Stressor Magnitude Data from Excel Workbook — StressorMagnitudeWorkbook","text":"Extract stressor magnitude data sheet Excel workbook.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorMagnitudeWorkbook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Stressor Magnitude Data from Excel Workbook — StressorMagnitudeWorkbook","text":"","code":"StressorMagnitudeWorkbook(filename = NA, scenario_worksheet = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/StressorMagnitudeWorkbook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Stressor Magnitude Data from Excel Workbook — StressorMagnitudeWorkbook","text":"filename string. Relative file name stressor magnitude Excel workbook. scenario_worksheet string. Worksheet name scenario.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorMagnitudeWorkbook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Stressor Magnitude Data from Excel Workbook — StressorMagnitudeWorkbook","text":"stressor magnitude list object CEMPRA","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorMagnitudeWorkbook.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get Stressor Magnitude Data from Excel Workbook — StressorMagnitudeWorkbook","text":"information data format requirements, see Data Upload section vignette.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorResponseWorkbook.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Stressor Response Data from Excel Workbook — StressorResponseWorkbook","title":"Get Stressor Response Data from Excel Workbook — StressorResponseWorkbook","text":"Extract stressor response data sheet Excel workbook.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorResponseWorkbook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Stressor Response Data from Excel Workbook — StressorResponseWorkbook","text":"","code":"StressorResponseWorkbook(filename = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/StressorResponseWorkbook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Stressor Response Data from Excel Workbook — StressorResponseWorkbook","text":"filename string. Relative file name stressor response Excel workbook.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorResponseWorkbook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Stressor Response Data from Excel Workbook — StressorResponseWorkbook","text":"list object main_sheet, stressor_names stressor response data frames (sr_dat).","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/StressorResponseWorkbook.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get Stressor Response Data from Excel Workbook — StressorResponseWorkbook","text":"information data format requirements, see Data Upload Results Export tab associated Shiny App. Uses readxl::read_excel() load workbook sheets: Main sheet: meta data / cover sheet indicating: stressor names categories interactions linkages scales approximation function type target life stages contribution survival capacity parameters stressor units target model (CE population models, ) additional stressor-response sheets workbook context specific stressor-response curve data sheet name must match stressor names Main sheet, otherwise \"Bad worksheet names\" error message. sheets must contain columns <stressor_name>, Mean System Capacity (%), SD, low.limit, .limit","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SystemCapacity.html","id":null,"dir":"Reference","previous_headings":"","what":"System Capacity — SystemCapacity","title":"System Capacity — SystemCapacity","text":"Calculates system capacity stressor.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SystemCapacity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"System Capacity — SystemCapacity","text":"","code":"SystemCapacity(   f.dose.df,   f.main.df,   f.stressor.df,   f.mean.resp.list,   n.sims = 100,   socioeconomic_inputs = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/SystemCapacity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"System Capacity — SystemCapacity","text":"f.dose.df Stressor magnitude data frame returned StressorMagnitudeWorkbook() filtered target stressor. f.main.df main_sheet list object returned StressorResponseWorkbook()$main_sheet filtered target stressor. f.stressor.df Dose response data frame returned StressorResponseWorkbook()$sr_dat target stressor. f.mean.resp.list Response function list target variable returned mean_Response(). n.sims Number simulations generate. Defaults t0 100. socioeconomic_inputs (Optional) list object SE inputs.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/SystemCapacity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"System Capacity — SystemCapacity","text":"SystemCapacity() calculates system capacity stressor. function takes data frame arguments stressor magnitudes dose responses plus list stressor-response approximation functions (f. local list data frame). Note: stressors multiple doses (Additive interaction).","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/beta_param.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Beta Parameter — beta_param","title":"Estimate Beta Parameter — beta_param","text":"Estimates beta parameter given mean (rates) SD \"untruncated\" beta distribution.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/beta_param.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Beta Parameter — beta_param","text":"","code":"beta_param(mean, sd)"},{"path":"https://essatech.github.io/CEMPRA/reference/beta_param.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Beta Parameter — beta_param","text":"mean Numeric. mean. sd Numeric. standard deviation.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/beta_param.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Beta Parameter — beta_param","text":"list alpha beta parameters along messages mean cv","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/beta_param.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Beta Parameter — beta_param","text":"Updated using analytical solution Kyle Wilson.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/beta_param.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Beta Parameter — beta_param","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) CEMPRA::beta_param(0.8, 0.2)$beta } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/beta_stretch_val.html","id":null,"dir":"Reference","previous_headings":"","what":"beta_stretch_val — beta_stretch_val","title":"beta_stretch_val — beta_stretch_val","text":"Calculate parameters stretched beta distribution.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/beta_stretch_val.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"beta_stretch_val — beta_stretch_val","text":"","code":"beta_stretch_val(mn, variance = NA, sigma = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/bh_dd_stages_check_ok.html","id":null,"dir":"Reference","previous_headings":"","what":"bh_dd_stages_check — bh_dd_stages_check_ok","title":"bh_dd_stages_check — bh_dd_stages_check_ok","text":"Check bh_dd_stages vector values valid.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/bh_dd_stages_check_ok.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"bh_dd_stages_check — bh_dd_stages_check_ok","text":"","code":"bh_dd_stages_check_ok(bh_dd_stages = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/bh_stage_f.html","id":null,"dir":"Reference","previous_headings":"","what":"bh_stage_f — bh_stage_f","title":"bh_stage_f — bh_stage_f","text":"survival/transitions. Classical BH function","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/bh_stage_f.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"bh_stage_f — bh_stage_f","text":"","code":"bh_stage_f(alpha = NA, k = NA, Nt1 = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/build_k_for_proj_dd.html","id":null,"dir":"Reference","previous_headings":"","what":"build_k_for_proj_dd — build_k_for_proj_dd","title":"build_k_for_proj_dd — build_k_for_proj_dd","text":"Build build_habitat_dd_k object bh_dd_stages PopulationModel_Run Projection_DD.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/build_k_for_proj_dd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"build_k_for_proj_dd — build_k_for_proj_dd","text":"","code":"build_k_for_proj_dd(habitat_dd_k, HUC_ID, life_histories, life_cycle_params)"},{"path":"https://essatech.github.io/CEMPRA/reference/build_k_for_proj_dd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"build_k_for_proj_dd — build_k_for_proj_dd","text":"life_histories Object returned pop_model_matrix_elements()$life_histories life_cycle_params Object returned pop_model_dat_clean() without editing","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/build_k_for_proj_dd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"build_k_for_proj_dd — build_k_for_proj_dd","text":"list following components: ret_stage_k_override: named numeric vector carrying capacity (K) values life stage, including fry (K0) spawners applicable. ret_bh_dd_stages: character vector life stage names subject Beverton-Holt density dependence. ret_total_anadromous_spawners: numeric value representing total carrying capacity anadromous spawners, applicable.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/build_k_for_proj_dd.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"build_k_for_proj_dd — build_k_for_proj_dd","text":"function builds habitat carrying capacity (K) vector use density dependent projections. extracts K values habitat_dd_k input data frame target HUC_ID formats use Projection_DD(). also identifies life stages subject density dependence based life cycle parameters. function return empty list location-based DD.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/ce.func.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply CSC Across dataframe — ce.func","title":"Apply CSC Across dataframe — ce.func","text":"Apply CSC Across dataframe","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/ce.func.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply CSC Across dataframe — ce.func","text":"","code":"ce.func(df)"},{"path":"https://essatech.github.io/CEMPRA/reference/ce.func.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply CSC Across dataframe — ce.func","text":"df dataframe","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/ce.func.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply CSC Across dataframe — ce.func","text":"ddply function calculate cumulative system capacity, df contains system capacity stressor given HUC simulation","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/cor.AR1.html","id":null,"dir":"Reference","previous_headings":"","what":"cor.AR1 — cor.AR1","title":"cor.AR1 — cor.AR1","text":"cor.AR1","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/cor.AR1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"cor.AR1 — cor.AR1","text":"","code":"cor.AR1(n, rho, names = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/cor.CompSym.html","id":null,"dir":"Reference","previous_headings":"","what":"cor.CompSym — cor.CompSym","title":"cor.CompSym — cor.CompSym","text":"cor.CompSym","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/cor.CompSym.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"cor.CompSym — cor.CompSym","text":"","code":"cor.CompSym(n, rho, names = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/d.vec.f.html","id":null,"dir":"Reference","previous_headings":"","what":"d.vec.f — d.vec.f","title":"d.vec.f — d.vec.f","text":"create vector density dependence effects using compensation ratios","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/d.vec.f.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"d.vec.f — d.vec.f","text":"","code":"d.vec.f(df, Ks, Nv)"},{"path":"https://essatech.github.io/CEMPRA/reference/dd.N.bh.html","id":null,"dir":"Reference","previous_headings":"","what":"dd.N.bh — dd.N.bh","title":"dd.N.bh — dd.N.bh","text":"Apply location stage-specific Beverton-Holt density dependent constraints","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/dd.N.bh.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"dd.N.bh — dd.N.bh","text":"","code":"dd.N.bh(   dat = NA,   t = NA,   st = NA,   N = NA,   N_prev = NA,   bh_dd_stages = NA,   smig = NA )"},{"path":"https://essatech.github.io/CEMPRA/reference/dd_calc.html","id":null,"dir":"Reference","previous_headings":"","what":"dd_calc — dd_calc","title":"dd_calc — dd_calc","text":"dd_calc","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/dd_calc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"dd_calc — dd_calc","text":"","code":"dd_calc(dat, varNames, Nmat)"},{"path":"https://essatech.github.io/CEMPRA/reference/dd_stage.html","id":null,"dir":"Reference","previous_headings":"","what":"dd_stage — dd_stage","title":"dd_stage — dd_stage","text":"dd_stage","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/dd_stage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"dd_stage — dd_stage","text":"","code":"dd_stage()"},{"path":"https://essatech.github.io/CEMPRA/reference/esub.html","id":null,"dir":"Reference","previous_headings":"","what":"esub — esub","title":"esub — esub","text":"esub","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/esub.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"esub — esub","text":"","code":"esub(expr, sublist)"},{"path":"https://essatech.github.io/CEMPRA/reference/f_rand.html","id":null,"dir":"Reference","previous_headings":"","what":"f_rand — f_rand","title":"f_rand — f_rand","text":"f_rand","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/f_rand.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"f_rand — f_rand","text":"","code":"f_rand(mn, sigma, rho)"},{"path":"https://essatech.github.io/CEMPRA/reference/get_transition_positions.html","id":null,"dir":"Reference","previous_headings":"","what":"proc utility function — get_transition_positions","title":"proc utility function — get_transition_positions","text":"proc utility function","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/get_transition_positions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"proc utility function — get_transition_positions","text":"","code":"get_transition_positions(matrix_size)"},{"path":"https://essatech.github.io/CEMPRA/reference/harm_k.html","id":null,"dir":"Reference","previous_headings":"","what":"harm_k — harm_k","title":"harm_k — harm_k","text":"harm_k","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/harm_k.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"harm_k — harm_k","text":"","code":"harm_k(dat, stressors, Nstage, Korig)"},{"path":"https://essatech.github.io/CEMPRA/reference/init_pop.html","id":null,"dir":"Reference","previous_headings":"","what":"init_pop — init_pop","title":"init_pop — init_pop","text":"init_pop","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/init_pop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"init_pop — init_pop","text":"","code":"init_pop(mx, Nt, p.rep)"},{"path":"https://essatech.github.io/CEMPRA/reference/init_pop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"init_pop — init_pop","text":"mx Population Matrix Nt Desire adult density p.rep maturity vector - 1: mature; 0: Juvenle; length Tmax + 1","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_load.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Interaction Matrices — interaction_matrix_load","title":"Load Interaction Matrices — interaction_matrix_load","text":"Load interaction Excel Matrices","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_load.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Interaction Matrices — interaction_matrix_load","text":"","code":"interaction_matrix_load(mint_names = NA, filename = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_load.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Interaction Matrices — interaction_matrix_load","text":"mint_names Character vector interaction matrix names. filename Character string Excel file.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_load.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Interaction Matrices — interaction_matrix_load","text":"list object interaction matrix objects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_load.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load Interaction Matrices — interaction_matrix_load","text":"Load 2-factor interaction matrices Excel workbook (exist). function run within StressorResponseWorkbook().","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_sys_cap.html","id":null,"dir":"Reference","previous_headings":"","what":"Interaction Matrix System Capacity — interaction_matrix_sys_cap","title":"Interaction Matrix System Capacity — interaction_matrix_sys_cap","text":"Use run 2D linear interpolation interaction matrix calculate system capacity.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_sys_cap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interaction Matrix System Capacity — interaction_matrix_sys_cap","text":"","code":"interaction_matrix_sys_cap(MInt, sc.dose.df, adult_sys_cap)"},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_sys_cap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interaction Matrix System Capacity — interaction_matrix_sys_cap","text":"MInt One item object returned StressorResponseWorkbook() sc.dose.df Data frame columns HUC, Stressor, simulation, dose sys.cap. adult_sys_cap Joe Model run variables identified adult system capacity.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_sys_cap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Interaction Matrix System Capacity — interaction_matrix_sys_cap","text":"Updated sc.dose.df data frame system capacity values","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/interaction_matrix_sys_cap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Interaction Matrix System Capacity — interaction_matrix_sys_cap","text":"Runs individual MInt_ worksheet object supplied sr_wb_dat$MInt calculates system capacity. interaction_matrix_sys_cap() run apply sr_wb_dat$MInt. Returns sc.dose.df updated system capacity filtered variables.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/mean_Response.html","id":null,"dir":"Reference","previous_headings":"","what":"Mean Response Function — mean_Response","title":"Mean Response Function — mean_Response","text":"Generate mean response function stressor.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/mean_Response.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mean Response Function — mean_Response","text":"","code":"mean_Response(n.stressors = NA, str.list = NA, main = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/mean_Response.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mean Response Function — mean_Response","text":"n.stressors Numeric. number stressors. str.list List object. list object dataframes stressor response relationships. main Dataframe. dataframe Main cover sheet stressor response relationships.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/mean_Response.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Mean Response Function — mean_Response","text":"Creates functions interpolate mean system capacity, SD, lower limit upper limit.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/mean_Response.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mean Response Function — mean_Response","text":"","code":"if (FALSE) { # \\dontrun{  library(CEMPRA)  # Import of stressor response and magnitude workbook filename_rm <- system.file(\"extdata\", \"stressor_magnitude_unc_ARTR.xlsx\", package = \"CEMPRA\") filename_sr <- system.file(\"extdata\", \"stressor_response_fixed_ARTR.xlsx\", package = \"CEMPRA\") dose <- StressorMagnitudeWorkbook(filename = filename_rm, scenario_worksheet = \"natural_unc\") sr_wb_dat <- StressorResponseWorkbook(filename = filename_sr)   mean.resp.list <- mean_Response(   n.stressors = nrow(sr_wb_dat$main_sheet),   str.list = sr_wb_dat$sr_dat,   main = sr_wb_dat$main_sheet )  # Get the mean response function for the first stressor my_stressor <- sr_wb_dat$main_sheet$Stressors[[1]] my_stressor  # Look at the stressor-response curve sr_data <- sr_wb_dat$sr_dat[names(sr_wb_dat$sr_dat) == my_stressor][[1]]  plot(sr_data$value,      sr_data$mean_system_capacity,      type = 'b',      xlab = \"Raw Stressor Value\",      ylab = \"Mean System Capacity (%)\")  # The lookup the value from mean_Response() custom_function <- mean.resp.list[[1]][[1]]  # Input several raw stressor values and the function will # return the mean system capacity custom_function(20) custom_function(60) custom_function(80)  } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/mn.sd.huc.html","id":null,"dir":"Reference","previous_headings":"","what":"Cumulative System Capacity Calculation — mn.sd.huc","title":"Cumulative System Capacity Calculation — mn.sd.huc","text":"Cumulative System Capacity Calculation","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/mn.sd.huc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cumulative System Capacity Calculation — mn.sd.huc","text":"","code":"mn.sd.huc(df)"},{"path":"https://essatech.github.io/CEMPRA/reference/mn.sd.huc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cumulative System Capacity Calculation — mn.sd.huc","text":"df dataframe","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/mn.sd.huc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cumulative System Capacity Calculation — mn.sd.huc","text":"Function calculate cumulative system capacity mean sd across simulations HUC series Monte Carlo sims","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pmx_eval.html","id":null,"dir":"Reference","previous_headings":"","what":"Project Matrix Forward in Time — pmx_eval","title":"Project Matrix Forward in Time — pmx_eval","text":"Project Matrix Forward Time","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pmx_eval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Project Matrix Forward in Time — pmx_eval","text":"","code":"pmx_eval(mx, vars, byrow = TRUE)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_K_adj.html","id":null,"dir":"Reference","previous_headings":"","what":"K_adj — pop_model_K_adj","title":"K_adj — pop_model_K_adj","text":"Define K_adj value.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_K_adj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"K_adj — pop_model_K_adj","text":"","code":"pop_model_K_adj(replicates = 100, dat, mx, dx, Nyears = 250, H.mx = NULL)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_K_adj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"K_adj — pop_model_K_adj","text":"replicates Number replicates dat Life history data mx projection matrix expression dx matrix density-dependence effect Nyears Years run simulation H.mx harm projection matrix","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_K_adj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"K_adj — pop_model_K_adj","text":"K_adj object make adjustments","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_K_adj.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"K_adj — pop_model_K_adj","text":"Initialize populations find carrying capacity life stage. Carrying capacity defined adult stage estimated life-stages using stable-stage distribution (.e., carrying capacity adult stage set 100 carrying capacity stage (stage x) amount stage x necessary result 100 adults equilibrium conditions).","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model CE Application to Vital Rates — pop_model_ce_apply","title":"Population Model CE Application to Vital Rates — pop_model_ce_apply","text":"Utility function apply cumulative effects vital rates.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model CE Application to Vital Rates — pop_model_ce_apply","text":"","code":"pop_model_ce_apply(dat = NULL, CE_df = NULL)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model CE Application to Vital Rates — pop_model_ce_apply","text":"dat Life history vital rates list object. CE_df Cumulative effects data frame.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model CE Application to Vital Rates — pop_model_ce_apply","text":"modified dat vital rates object applying CE effects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model CE Application to Vital Rates Year-Specific — pop_model_ce_apply_year","title":"Population Model CE Application to Vital Rates Year-Specific — pop_model_ce_apply_year","text":"Utility function apply cumulative effects vital rates.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model CE Application to Vital Rates Year-Specific — pop_model_ce_apply_year","text":"","code":"pop_model_ce_apply_year(   rates = NULL,   CE_df = NULL,   anadromous = FALSE,   mat_stage = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model CE Application to Vital Rates Year-Specific — pop_model_ce_apply_year","text":"rates Life history vital rates list object. CE_df Cumulative effects data frame. anadromous Anadromous TRUE/FALSE. mat_stage Named numeric vector mature life stages.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ce_apply_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model CE Application to Vital Rates Year-Specific — pop_model_ce_apply_year","text":"modified dat vital rates object applying CE effects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_dat_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"pop_model_dat_clean — pop_model_dat_clean","title":"pop_model_dat_clean — pop_model_dat_clean","text":"pop_model_dat_clean","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_dat_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"pop_model_dat_clean — pop_model_dat_clean","text":"","code":"pop_model_dat_clean(dat, nstage_fill = NULL)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_dat_clean.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"pop_model_dat_clean — pop_model_dat_clean","text":"Cleans input parameters csv.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_get_spawners.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model Get Spawners — pop_model_get_spawners","title":"Population Model Get Spawners — pop_model_get_spawners","text":"Get spawners PopulationModel_Run() output.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_get_spawners.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model Get Spawners — pop_model_get_spawners","text":"","code":"pop_model_get_spawners(   data = NULL,   life_stage = \"spawners\",   life_cycle_params = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_get_spawners.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model Get Spawners — pop_model_get_spawners","text":"data list output PopulationModel_Run(). life_stage Target lifestage. Character string. Can either spawners . life_cycle_params dataframe. Life cycle parameters.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_get_spawners.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model Get Spawners — pop_model_get_spawners","text":"dataframe spawner abundance location, replicate, year.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_get_spawners.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model Get Spawners — pop_model_get_spawners","text":"Transform verbose output PopulationModel_Run() clean dataframe abundance data target life stage. run PopulationModel_Run() Projection_DD.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_get_spawners.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Population Model Get Spawners — pop_model_get_spawners","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_hab_dens_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"pop_model_hab_dens_clean — pop_model_hab_dens_clean","title":"pop_model_hab_dens_clean — pop_model_hab_dens_clean","text":"pop_model_hab_dens_clean","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_hab_dens_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"pop_model_hab_dens_clean — pop_model_hab_dens_clean","text":"","code":"pop_model_hab_dens_clean(hab_dens = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_hab_dens_clean.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"pop_model_hab_dens_clean — pop_model_hab_dens_clean","text":"Cleans input parameters csv.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ltre.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model LTRE — pop_model_ltre","title":"Population Model LTRE — pop_model_ltre","text":"Run LTRE population model","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ltre.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model LTRE — pop_model_ltre","text":"","code":"pop_model_ltre(   step_size = 0.05,   dose = NA,   sr_wb_dat = NA,   life_cycle_params = NA,   HUC_ID = NA,   n_reps = 100,   stressors = NA,   habitat_dd_k = NULL )"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ltre.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model LTRE — pop_model_ltre","text":"step_size numeric. step size ltre experiment parameter adjustment. dose dataframe. Stressor magnitude dataset imported StressorMagnitudeWorkbook(). sr_wb_dat list object. Stressor response workbook imported StressorResponseWorkbook(). life_cycle_params dataframe. Life cycle parameters. HUC_ID character. HUC_ID location unit. Can one HUC_ID (array). n_reps numeric. Number replicates. Carlo simulations Population Model. stressors (optional) character vector stressor names include Population Model. Leave default value NA wish include stressors applicable population model. habitat_dd_k (optional) dataframe location stage-specific habitat capacity k values target species. used dataframe override capacity estimates","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ltre.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model LTRE — pop_model_ltre","text":"prep .... step_size = 0.05","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_ltre.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Population Model LTRE — pop_model_ltre","text":"","code":"if (FALSE) { # \\dontrun{ library(CEMPRA) # in prep } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model Matrix Elements — pop_model_matrix_elements","title":"Population Model Matrix Elements — pop_model_matrix_elements","text":"Build population model matrix elements.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model Matrix Elements — pop_model_matrix_elements","text":"","code":"pop_model_matrix_elements(pop_mod_setup = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model Matrix Elements — pop_model_matrix_elements","text":"pop_mod_setup List. Object returned population_model_setup().","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model Matrix Elements — pop_model_matrix_elements","text":"list object symbolic objects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model Matrix Elements — pop_model_matrix_elements","text":"intermediate setup function run population model. However, outputs useful , especially eigen analyses. pop_model_matrix_elements() run pop_model_setup() pop_model_setup_anadromous(), pop_model_matrix_elements() must run Projection_DD(). Key outputs explore include density independent projection matrix, life histories, symbolic representation matrix math density dependent density independent components.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Population Model Matrix Elements — pop_model_matrix_elements","text":"","code":"if (FALSE) { # \\dontrun{  # Load the CEMPRA package. library(CEMPRA)  filename_lc <- system.file(\"extdata\", \"life_cycles.csv\", package = \"CEMPRA\") life_cycles <- read.csv(filename_lc)  # Setup objects for population model pop_mod_setup <- pop_model_setup(life_cycles = life_cycles)  # Build matrix elements for population model pop_mod_mat <- pop_model_matrix_elements(pop_mod_setup = pop_mod_setup) names(pop_mod_mat)  # A density independent projection matrix pop_mod_mat$projection_matrix    } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements_anadromous.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","title":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","text":"Build population model matrix elements anadromous fish.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements_anadromous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","text":"","code":"pop_model_matrix_elements_anadromous(pop_mod_setup = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements_anadromous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","text":"pop_mod_setup List. Object returned population_model_setup_anadromous(). Use pop_model_matrix_elements() objects returned population_model_setup().","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements_anadromous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","text":"list object symbolic objects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements_anadromous.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","text":"intermediate setup function run population model. However, outputs useful , especially eigen analyses. pop_model_matrix_elements() run pop_model_setup() pop_model_setup_anadromous(), pop_model_matrix_elements() must run Projection_DD(). Key outputs explore include density independent projection matrix, life histories, symbolic representation matrix math density dependent density independent components. population_model_setup() run pop_model_matrix_elements() non-anadromous species. population_model_setup_anadromous() run pop_model_matrix_elements_anadromous() anadromous species.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_matrix_elements_anadromous.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Population Model Matrix Elements for Anadromous Fish — pop_model_matrix_elements_anadromous","text":"","code":"if (FALSE) { # \\dontrun{  # Load the CEMPRA package. library(CEMPRA)  filename_lc <- system.file(\"extdata\", \"life_cycles.csv\", package = \"CEMPRA\") life_cycles <- read.csv(filename_lc)  # Setup objects for population model pop_mod_setup <- pop_model_setup(life_cycles = life_cycles)  # Build matrix elements for population model pop_mod_mat <- pop_model_matrix_elements(pop_mod_setup = pop_mod_setup) names(pop_mod_mat)  # A density independent projection matrix pop_mod_mat$projection_matrix    } # }"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model Setup — pop_model_setup","title":"Population Model Setup — pop_model_setup","text":"Generate symbolic objects population model generate parameter matrices.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model Setup — pop_model_setup","text":"","code":"pop_model_setup(life_cycles = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model Setup — pop_model_setup","text":"life_cycles Data frame. Raw life cycles.csv data frame.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model Setup — pop_model_setup","text":"list object symbolic objects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model Setup — pop_model_setup","text":"intermediate setup function run population, outputs useful , especially eigen analyses projection matrix. pop_model_setup() run pop_model_matrix_elements() Projection_DD(). Transition Matrix: Calculates stage-specific survivals transition rates, survival probabilities, transition probabilities. Initializes survival/transition rates subject stage-specific density-dependence. Checks excessive compensation ratios. Dataset life-histories: transition probabilities egg-survival, age-0 survival, stage-specific survival probabilities spawning events per year eggs-per-spawner number spawning intervals adult carrying capacity sex ratio","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup_anadromous.html","id":null,"dir":"Reference","previous_headings":"","what":"Population Model Setup for Anadromous Species — pop_model_setup_anadromous","title":"Population Model Setup for Anadromous Species — pop_model_setup_anadromous","text":"Generate symbolic objects population model generate parameter matrices Pacific salmon.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup_anadromous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Population Model Setup for Anadromous Species — pop_model_setup_anadromous","text":"","code":"pop_model_setup_anadromous(life_cycles = NA)"},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup_anadromous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Population Model Setup for Anadromous Species — pop_model_setup_anadromous","text":"life_cycles Data frame. Raw life cycles.csv data frame.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup_anadromous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Population Model Setup for Anadromous Species — pop_model_setup_anadromous","text":"list object symbolic objects.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/pop_model_setup_anadromous.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Population Model Setup for Anadromous Species — pop_model_setup_anadromous","text":"intermediate setup function run population, outputs useful , especially eigen analyses projection matrix. pop_model_setup_anadromous() run pop_model_matrix_elements() Projection_DD(). pop_model_setup_anadromous() customized version pop_model_setup() anadromous species (Salmon). Follow convention Davison Statterthwaite 2016 (Natural Resource Modelling Use matrix model predict life history schedules semelparous population). Transition Matrix: Calculates stage-specific survivals transition rates, survival probabilities, transition probabilities. Initializes survival/transition rates subject stage-specific density-dependence. Checks excessive compensation ratios. Dataset life-histories: transition probabilities egg-survival, age-0 survival, stage-specific survival probabilities spawning events per year eggs-per-spawner number spawning intervals adult carrying capacity sex ratio","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/proc.html","id":null,"dir":"Reference","previous_headings":"","what":"proc — proc","title":"proc — proc","text":"proc proc utility function","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/proc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"proc — proc","text":"","code":"proc(e, env = parent.frame())  proc(e, env = parent.frame())"},{"path":"https://essatech.github.io/CEMPRA/reference/rbeta2.html","id":null,"dir":"Reference","previous_headings":"","what":"rbeta equivelent from TruncatedDistributions package — rbeta2","title":"rbeta equivelent from TruncatedDistributions package — rbeta2","text":"rbeta equivelent TruncatedDistributions package","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/rbeta2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"rbeta equivelent from TruncatedDistributions package — rbeta2","text":"","code":"rbeta2(n, shape1, shape2, ncp = 0)"},{"path":"https://essatech.github.io/CEMPRA/reference/rtnorm_TruncatedDistributions.html","id":null,"dir":"Reference","previous_headings":"","what":"rtnorm from Truncated Distributions — rtnorm_TruncatedDistributions","title":"rtnorm from Truncated Distributions — rtnorm_TruncatedDistributions","text":"rtnorm Truncated Distributions","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/rtnorm_TruncatedDistributions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"rtnorm from Truncated Distributions — rtnorm_TruncatedDistributions","text":"","code":"rtnorm_TruncatedDistributions(n, mean = 0, sd = 1, a = -Inf, b = Inf)"},{"path":"https://essatech.github.io/CEMPRA/reference/rtnorm_TruncatedDistributions.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"rtnorm from Truncated Distributions — rtnorm_TruncatedDistributions","text":"rtnorm Truncated Distributions","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/s0_optim.f.html","id":null,"dir":"Reference","previous_headings":"","what":"s0_optim.f — s0_optim.f","title":"s0_optim.f — s0_optim.f","text":"s0_optim.f","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/s0_optim.f.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"s0_optim.f — s0_optim.f","text":"","code":"s0_optim.f(s0, mx, dat, target.lambda)"},{"path":"https://essatech.github.io/CEMPRA/reference/s0_optim.f.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"s0_optim.f — s0_optim.f","text":"Optimization function - find YOY survival gives lambda","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/s0_optim_anadromous.f.html","id":null,"dir":"Reference","previous_headings":"","what":"s0_optim_anadromous.f — s0_optim_anadromous.f","title":"s0_optim_anadromous.f — s0_optim_anadromous.f","text":"s0_optim_anadromous.f","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/s0_optim_anadromous.f.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"s0_optim_anadromous.f — s0_optim_anadromous.f","text":"","code":"s0_optim_anadromous.f(s0, mx, dat, target.lambda)"},{"path":"https://essatech.github.io/CEMPRA/reference/s0_optim_anadromous.f.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"s0_optim_anadromous.f — s0_optim_anadromous.f","text":"Optimization function - find YOY survival gives lambda","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/s_rand.html","id":null,"dir":"Reference","previous_headings":"","what":"s_rand — s_rand","title":"s_rand — s_rand","text":"Function generate random survival rates","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/s_rand.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"s_rand — s_rand","text":"","code":"s_rand(mn, cv, rho)"},{"path":"https://essatech.github.io/CEMPRA/reference/stage_probs.html","id":null,"dir":"Reference","previous_headings":"","what":"stage_probs — stage_probs","title":"stage_probs — stage_probs","text":"stage_probs","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/stage_probs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"stage_probs — stage_probs","text":"","code":"stage_probs(x, y)"},{"path":"https://essatech.github.io/CEMPRA/reference/tbeta_rnd.html","id":null,"dir":"Reference","previous_headings":"","what":"tbeta Random — tbeta_rnd","title":"tbeta Random — tbeta_rnd","text":"Returns N random estimates truncated beta distribution given vectors mean SD untruncated distribution system capacity.","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/tbeta_rnd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tbeta Random — tbeta_rnd","text":"","code":"tbeta_rnd(mn_est, sd_est, low.limit = 0, up.limit = 1)"},{"path":"https://essatech.github.io/CEMPRA/reference/tbeta_rnd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tbeta Random — tbeta_rnd","text":"mn_est Vector mean values. sd_est Vector standard deviations. low.limit Numeric. Defaults 0. .limit Numeric. Defaults 1 .","code":""},{"path":"https://essatech.github.io/CEMPRA/reference/tbeta_rnd.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"tbeta Random — tbeta_rnd","text":"Function returns returns one random value mean sd value. run 0 1 values.","code":""}]
